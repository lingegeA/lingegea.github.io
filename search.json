[{"title":"mysql：不允许被远程访问解决方法","url":"/2020/07/14/MysqlNotAllowConnect/","content":"<blockquote>\n<p>Host ‘XXXXXXXX’ is not allowed to connect to this MySQL server<br>不允许被远程访问</p>\n</blockquote>\n<blockquote>\n<p>第一步输入：use mysql;</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql&gt; use mysql;</span><br><span class=\"line\">Reading table information <span class=\"keyword\">for</span> completion of table and column names</span><br><span class=\"line\">You can turn off this feature to get a quicker startup with -A</span><br><span class=\"line\"></span><br><span class=\"line\">Database changed</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>第二步输入：select host from user where user=’root’;<br>输入以上两个命令查看主机配置信息</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql&gt; select host from user <span class=\"built_in\">where</span> user=<span class=\"string\">'root'</span>;</span><br><span class=\"line\">+-----------+</span><br><span class=\"line\">| host      |</span><br><span class=\"line\">+-----------+</span><br><span class=\"line\">| localhost |</span><br><span class=\"line\">+-----------+</span><br><span class=\"line\">1 row <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>第三步输入：update user set host = ‘%’ where user =’root’;<br>将host设置为通配符模式% Host设置“%”便可远程访问了</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql&gt; update user <span class=\"built_in\">set</span> host = <span class=\"string\">'%'</span> <span class=\"built_in\">where</span> user =<span class=\"string\">'root'</span>;</span><br><span class=\"line\">Query OK, 1 row affected (0.02 sec)</span><br><span class=\"line\">Rows matched: 1  Changed: 1  Warnings: 0</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>第四步输入：flush privileges;<br>是更改的配置立即生效</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql&gt; flush privileges;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"然后就可以正常访问了\"><a href=\"#然后就可以正常访问了\" class=\"headerlink\" title=\"然后就可以正常访问了\"></a>然后就可以正常访问了</h4>","categories":["Mysql"],"tags":["Mysql"]},{"title":"实现点击按钮复制信息","url":"/2020/07/09/CopyInformation/","content":"<h2 id=\"创建一个按钮-添加点击事件copyUrl\"><a href=\"#创建一个按钮-添加点击事件copyUrl\" class=\"headerlink\" title=\"创建一个按钮, 添加点击事件copyUrl\"></a>创建一个按钮, 添加点击事件copyUrl</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;el-button @click=<span class=\"string\">\"copyUrl('我是复制的信息')\"</span>&gt;复制&lt;/el-button&gt;</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"JS代码部分\"><a href=\"#JS代码部分\" class=\"headerlink\" title=\"JS代码部分\"></a>JS代码部分</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">copyUrl(val) &#123;</span><br><span class=\"line\">  const input = document.createElement(<span class=\"string\">\"input\"</span>);</span><br><span class=\"line\">  document.body.appendChild(input);</span><br><span class=\"line\">  input.setAttribute(<span class=\"string\">\"value\"</span>, val);</span><br><span class=\"line\">  input.select();</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (document.execCommand(<span class=\"string\">\"copy\"</span>)) &#123;</span><br><span class=\"line\">    document.execCommand(<span class=\"string\">\"copy\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  document.body.removeChild(input);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>简书: <a href=\"https://www.jianshu.com/p/daf479e26773\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n","categories":["JS"],"tags":["VUE / JS / Export"]},{"title":"CSS修改滚动条样式","url":"/2020/07/20/CssScrollStyle/","content":"<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">.div&#123;</span><br><span class=\"line\">  width: 250px;</span><br><span class=\"line\">  height: 100%</span><br><span class=\"line\">  overflow: auto;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.div::-webkit-scrollbar &#123;</span><br><span class=\"line\">/*滚动条整体样式*/</span><br><span class=\"line\">  width : 6px;  /*高宽分别对应横竖滚动条的尺寸*/</span><br><span class=\"line\">  height: 1px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.div::-webkit-scrollbar-thumb &#123;</span><br><span class=\"line\">/*滚动条里面小方块*/</span><br><span class=\"line\">  border-radius: 6px;</span><br><span class=\"line\">  box-shadow   : inset 0 0 5px rgba(0, 0, 0, 0.2);</span><br><span class=\"line\">  background   : <span class=\"comment\">#999;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.div::-webkit-scrollbar-track &#123;</span><br><span class=\"line\">/*滚动条里面轨道*/</span><br><span class=\"line\">  box-shadow   : inset 0 0 5px rgba(0, 0, 0, 0.2);</span><br><span class=\"line\">  border-radius: 10px;</span><br><span class=\"line\">  background   : <span class=\"comment\">#ededed;</span></span><br><span class=\"line\">  display: block;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":["CSS"],"tags":["CSS"]},{"title":"CSS变量的使用并通过JS去修改CSS变量修改项目主题","url":"/2020/07/17/CssVariable/","content":"<h3 id=\"声明变量\"><a href=\"#声明变量\" class=\"headerlink\" title=\"声明变量\"></a>声明变量</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">body &#123;</span><br><span class=\"line\">  --color: <span class=\"comment\">#7F583F;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>各种值都可以放入<code>CSS 变量</code>中</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">:root &#123;</span><br><span class=\"line\">  --main-size: 20px;</span><br><span class=\"line\">  --main-bg-rgb: rgb(255,255,255);</span><br><span class=\"line\">  --main-bg-rgba: rgba(255,255,255,.5);</span><br><span class=\"line\">  --main-width: calc(100% - 800px);</span><br><span class=\"line\">  --main-color: red;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>注意: 变量名对大小写敏感,--main-size 和 --Main-Size是两个变量</code></p>\n<h3 id=\"使用变量\"><a href=\"#使用变量\" class=\"headerlink\" title=\"使用变量\"></a>使用变量</h3><p>使用的时候通过<code>var()</code>函数读取变量</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">div&#123;</span><br><span class=\"line\">  background: var(--color);</span><br><span class=\"line\">  font-size: var(--mian-size);</span><br><span class=\"line\">  width: var(--main-width);</span><br><span class=\"line\">  border: 10px solid var(--mian-color);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"对响应式布局\"><a href=\"#对响应式布局\" class=\"headerlink\" title=\"对响应式布局\"></a>对响应式布局</h3><p>CSS 是动态的，页面的任何变化，都会导致采用的规则变化。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">body &#123;</span><br><span class=\"line\">  --primary: <span class=\"comment\">#7F583F;</span></span><br><span class=\"line\">  --secondary: <span class=\"comment\">#F7EFD2;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">a &#123;</span><br><span class=\"line\">  color: var(--primary);</span><br><span class=\"line\">  text-decoration-color: var(--secondary);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">@media screen and (min-width: 768px) &#123;</span><br><span class=\"line\">  body &#123;</span><br><span class=\"line\">    --primary:  <span class=\"comment\">#F7EFD2;</span></span><br><span class=\"line\">    --secondary: <span class=\"comment\">#7F583F;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"JS操作变量\"><a href=\"#JS操作变量\" class=\"headerlink\" title=\"JS操作变量\"></a>JS操作变量</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">// 设置变量</span><br><span class=\"line\">document.body.style.setProperty(<span class=\"string\">'--primary'</span>, <span class=\"string\">'#7F583F'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">// 读取变量</span><br><span class=\"line\">document.body.style.getPropertyValue(<span class=\"string\">'--primary'</span>).trim();</span><br><span class=\"line\">// <span class=\"string\">'#7F583F'</span></span><br><span class=\"line\"></span><br><span class=\"line\">// 删除变量</span><br><span class=\"line\">document.body.style.removeProperty(<span class=\"string\">'--primary'</span>);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"实例\"><a href=\"#实例\" class=\"headerlink\" title=\"实例\"></a>实例</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html lang=<span class=\"string\">\"en\"</span>&gt;</span><br><span class=\"line\">  &lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=<span class=\"string\">\"UTF-8\"</span> /&gt;</span><br><span class=\"line\">    &lt;meta name=<span class=\"string\">\"viewport\"</span> content=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span> /&gt;</span><br><span class=\"line\">    &lt;meta http-equiv=<span class=\"string\">\"X-UA-Compatible\"</span> content=<span class=\"string\">\"ie=edge\"</span> /&gt;</span><br><span class=\"line\">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class=\"line\">    &lt;style&gt;</span><br><span class=\"line\">      :root &#123;</span><br><span class=\"line\">        --color: red;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">#div &#123;</span></span><br><span class=\"line\">        margin: 100px auto;</span><br><span class=\"line\">        width: 200px;</span><br><span class=\"line\">        height: 200px;</span><br><span class=\"line\">        background-color: var(--color);</span><br><span class=\"line\">        cursor: pointer;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      p &#123;</span><br><span class=\"line\">        text-align: center;</span><br><span class=\"line\">        color: var(--color);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &lt;/style&gt;</span><br><span class=\"line\">  &lt;/head&gt;</span><br><span class=\"line\">  &lt;body&gt;</span><br><span class=\"line\">    &lt;div id=<span class=\"string\">\"app\"</span>&gt;&lt;/div&gt;</span><br><span class=\"line\">    &lt;p&gt;hello world&lt;/p&gt;</span><br><span class=\"line\">  &lt;/body&gt;</span><br><span class=\"line\">  &lt;script&gt;</span><br><span class=\"line\">    const div = document.getElementById(<span class=\"string\">\"app\"</span>);</span><br><span class=\"line\">    const htmlStyle = document.documentElement.style;</span><br><span class=\"line\">    div.onclick = <span class=\"function\"><span class=\"title\">function</span></span>() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (htmlStyle.getPropertyValue(<span class=\"string\">\"--color\"</span>).trim() === <span class=\"string\">\"blue\"</span>) &#123;</span><br><span class=\"line\">        htmlStyle.setProperty(<span class=\"string\">\"--color\"</span>, <span class=\"string\">\"red\"</span>);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        htmlStyle.setProperty(<span class=\"string\">\"--color\"</span>, <span class=\"string\">\"blue\"</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      console.log(htmlStyle.getPropertyValue(<span class=\"string\">\"--color\"</span>).trim());</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &lt;/script&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n\n<p>参考链接: <a href=\"http://www.ruanyifeng.com/blog/2017/05/css-variables.html\" target=\"_blank\" rel=\"noopener\">http://www.ruanyifeng.com/blog/2017/05/css-variables.html</a></p>\n","categories":["CSS"],"tags":["CSS"]},{"title":"MySQL创建数据库连接池","url":"/2020/07/14/MysqlPool/","content":"<h2 id=\"适用于Koa2和Express进行连接\"><a href=\"#适用于Koa2和Express进行连接\" class=\"headerlink\" title=\"适用于Koa2和Express进行连接\"></a>适用于Koa2和Express进行连接</h2><h4 id=\"安装-mysql驱动\"><a href=\"#安装-mysql驱动\" class=\"headerlink\" title=\"安装 mysql驱动\"></a>安装 mysql驱动</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install mysql --save</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"创建mysql数据连接池，封装mysql请求\"><a href=\"#创建mysql数据连接池，封装mysql请求\" class=\"headerlink\" title=\"创建mysql数据连接池，封装mysql请求\"></a>创建mysql数据连接池，封装mysql请求</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">const mysql = require(<span class=\"string\">'mysql'</span>);</span><br><span class=\"line\">const pool = mysql.createPool(&#123;</span><br><span class=\"line\">    host     :  <span class=\"string\">'127.0.0.1'</span>,</span><br><span class=\"line\">    user     :  <span class=\"string\">'root'</span>,</span><br><span class=\"line\">    password :  <span class=\"string\">'root'</span>,</span><br><span class=\"line\">    database :  <span class=\"string\">'mydatabase'</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"built_in\">let</span> query = <span class=\"keyword\">function</span>( sql, values ) &#123;</span><br><span class=\"line\">    // 返回一个 Promise</span><br><span class=\"line\">    <span class=\"built_in\">return</span> new Promise(( resolve, reject ) =&gt; &#123;</span><br><span class=\"line\">        pool.getConnection(<span class=\"keyword\">function</span>(err, connection) &#123; // 开启数据库</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">                reject( err );</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                console.log(<span class=\"string\">'开启成功!'</span>);</span><br><span class=\"line\">                pool.query(sql, values, ( err, rows) =&gt; &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> ( err ) &#123;</span><br><span class=\"line\">                        reject(err);</span><br><span class=\"line\">                    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                        resolve(rows);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    // 结束会话</span><br><span class=\"line\">                    connection.release();</span><br><span class=\"line\">                &#125;);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">// 抛出query</span><br><span class=\"line\">module.exports =  query;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Koa2使用\"><a href=\"#Koa2使用\" class=\"headerlink\" title=\"Koa2使用\"></a>Koa2使用</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">router.post(<span class=\"string\">'/login'</span>, async (ctx) =&gt; &#123;</span><br><span class=\"line\">    // 这里可以同步获取到rows</span><br><span class=\"line\">    <span class=\"built_in\">let</span> rows = await query(<span class=\"string\">'select * from table_name'</span>);</span><br><span class=\"line\">    ctx.body = &#123;</span><br><span class=\"line\">        code: 0,</span><br><span class=\"line\">        msg: <span class=\"string\">'请求成功'</span>,</span><br><span class=\"line\">        data: rows</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Express使用\"><a href=\"#Express使用\" class=\"headerlink\" title=\"Express使用\"></a>Express使用</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">router.post(<span class=\"string\">'/login'</span>, async (req, res) =&gt; &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    // 原来做法</span><br><span class=\"line\">    // query(<span class=\"string\">'select * from im_user'</span>, (err, rows) =&gt; &#123;</span><br><span class=\"line\">    //     res.json(&#123;</span><br><span class=\"line\">    //         code: 0,</span><br><span class=\"line\">    //         msg: <span class=\"string\">'请求成功'</span>,</span><br><span class=\"line\">    //         data: rows</span><br><span class=\"line\">    //     &#125;)</span><br><span class=\"line\">    // &#125;)</span><br><span class=\"line\">    </span><br><span class=\"line\">    // 现在</span><br><span class=\"line\">    const rows = await query(<span class=\"string\">'select * from table_name'</span>);</span><br><span class=\"line\">    res.json(&#123;</span><br><span class=\"line\">        code: 0,</span><br><span class=\"line\">        msg: <span class=\"string\">'请求成功'</span>,</span><br><span class=\"line\">        data: rows</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>","categories":["Mysql"],"tags":["Mysql"]},{"title":"MongoDB和Node.js编写简单的登录注册跳转","url":"/2020/07/08/MongoDBAndNode/","content":"<p>简书: <a href=\"https://www.jianshu.com/p/a98c538c5e35\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h2 id=\"引入express模块\"><a href=\"#引入express模块\" class=\"headerlink\" title=\"引入express模块\"></a>引入express模块</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm i express</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"引入mongose模块\"><a href=\"#引入mongose模块\" class=\"headerlink\" title=\"引入mongose模块\"></a>引入mongose模块</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm i mongoose --save</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"引入body-parser模块-用于处理前端-post-请求发送过来的数据\"><a href=\"#引入body-parser模块-用于处理前端-post-请求发送过来的数据\" class=\"headerlink\" title=\"引入body-parser模块:用于处理前端 post 请求发送过来的数据\"></a>引入body-parser模块:用于处理前端 post 请求发送过来的数据</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install body-parser</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>默认进入注册界面，输入账号密码，点击注册，注册成功后跳转到登录界面，如果已注册，则弹出“此账号已注册！”,登录界面输入账号密码，点击登录，成功则进入首页，失败则弹出“账号或密码输入错误！”</p>\n</blockquote>\n<h2 id=\"register-html注册界面\"><a href=\"#register-html注册界面\" class=\"headerlink\" title=\"register.html注册界面\"></a>register.html注册界面</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html lang=<span class=\"string\">\"en\"</span>&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=<span class=\"string\">\"UTF-8\"</span>&gt;</span><br><span class=\"line\">    &lt;title&gt;注册&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;h1&gt;这里是&lt;span style=<span class=\"string\">\"color: red;\"</span>&gt;注册&lt;/span&gt;界面&lt;/h1&gt;</span><br><span class=\"line\">    &lt;lable <span class=\"keyword\">for</span>=<span class=\"string\">\"username\"</span>&gt;用户名：&lt;/lable&gt;</span><br><span class=\"line\">    &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"text\"</span> id=<span class=\"string\">\"username\"</span>&gt;</span><br><span class=\"line\">    &lt;br/&gt;</span><br><span class=\"line\">    &lt;lable <span class=\"keyword\">for</span>=<span class=\"string\">\"password\"</span>&gt;密码：&lt;/lable&gt;</span><br><span class=\"line\">    &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"text\"</span> id=<span class=\"string\">\"password\"</span>&gt;</span><br><span class=\"line\">    &lt;br/&gt;</span><br><span class=\"line\">    &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"submit\"</span> id=<span class=\"string\">\"subBtn\"</span> value=<span class=\"string\">\"提交\"</span>&gt;</span><br><span class=\"line\">    &lt;a href=<span class=\"string\">\"./login\"</span>&gt;&lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> id=<span class=\"string\">\"loginBtn\"</span> value=<span class=\"string\">\"登录\"</span>&gt;&lt;/a&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;script src=<span class=\"string\">\"http://libs.baidu.com/jquery/2.0.0/jquery.min.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    $(<span class=\"string\">'#subBtn'</span>).click(<span class=\"function\"><span class=\"title\">function</span></span> () &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>($(<span class=\"string\">\"#username\"</span>).val() != <span class=\"string\">''</span> &amp;&amp; $(<span class=\"string\">\"#password\"</span>).val() != <span class=\"string\">''</span>)&#123;</span><br><span class=\"line\">            $.ajax(&#123;</span><br><span class=\"line\">                url: <span class=\"string\">'http://localhost:8080/register'</span>,</span><br><span class=\"line\">                <span class=\"built_in\">type</span>:<span class=\"string\">'post'</span>,</span><br><span class=\"line\">                data: &#123;</span><br><span class=\"line\">                    username: $(<span class=\"string\">\"#username\"</span>).val(),</span><br><span class=\"line\">                    password: $(<span class=\"string\">\"#password\"</span>).val()</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">                success: (data) =&gt; &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span>(data.code == <span class=\"string\">'100'</span>)&#123;</span><br><span class=\"line\">                        console.log(data);</span><br><span class=\"line\">                        <span class=\"keyword\">if</span>(data.yesOrNot == <span class=\"string\">'1'</span>) &#123;</span><br><span class=\"line\">                            window.location.href = <span class=\"string\">'login'</span>;</span><br><span class=\"line\">                        &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                            alert(<span class=\"string\">'此账号已被注册！'</span>);</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">                error: (xhr, error) =&gt; &#123;</span><br><span class=\"line\">                    console.error(error);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            alert(<span class=\"string\">'用户名和密码不能为空！！！'</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"login-html-登录界面\"><a href=\"#login-html-登录界面\" class=\"headerlink\" title=\"login.html 登录界面\"></a>login.html 登录界面</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html lang=<span class=\"string\">\"en\"</span>&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=<span class=\"string\">\"UTF-8\"</span>&gt;</span><br><span class=\"line\">    &lt;title&gt;登录&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;h1&gt;这里是&lt;span style=<span class=\"string\">\"color: red;\"</span>&gt;登录&lt;/span&gt;界面&lt;/h1&gt;</span><br><span class=\"line\">    &lt;lable <span class=\"keyword\">for</span>=<span class=\"string\">\"username\"</span>&gt;用户名：&lt;/lable&gt;</span><br><span class=\"line\">    &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"text\"</span> id=<span class=\"string\">\"username\"</span>&gt;</span><br><span class=\"line\">    &lt;br/&gt;</span><br><span class=\"line\">    &lt;lable <span class=\"keyword\">for</span>=<span class=\"string\">\"password\"</span>&gt;密码：&lt;/lable&gt;</span><br><span class=\"line\">    &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"text\"</span> id=<span class=\"string\">\"password\"</span>&gt;</span><br><span class=\"line\">    &lt;br/&gt;</span><br><span class=\"line\">    &lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"submit\"</span> id=<span class=\"string\">\"subBtn\"</span> value=<span class=\"string\">\"提交\"</span>&gt;</span><br><span class=\"line\">    &lt;a href=<span class=\"string\">\"./register\"</span>&gt;&lt;input <span class=\"built_in\">type</span>=<span class=\"string\">\"button\"</span> id=<span class=\"string\">\"loginBtn\"</span> value=<span class=\"string\">\"注册\"</span>&gt;&lt;/a&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script src=<span class=\"string\">\"http://libs.baidu.com/jquery/2.0.0/jquery.min.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    $(<span class=\"string\">'#subBtn'</span>).click(<span class=\"function\"><span class=\"title\">function</span></span> () &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>($(<span class=\"string\">\"#username\"</span>).val() != <span class=\"string\">''</span> &amp;&amp; $(<span class=\"string\">\"#password\"</span>).val() != <span class=\"string\">''</span>)&#123;</span><br><span class=\"line\">            $.ajax(&#123;</span><br><span class=\"line\">                url: <span class=\"string\">'http://localhost:8080/login'</span>,</span><br><span class=\"line\">                <span class=\"built_in\">type</span>:<span class=\"string\">'post'</span>,</span><br><span class=\"line\">                data: &#123;</span><br><span class=\"line\">                    username: $(<span class=\"string\">\"#username\"</span>).val(),</span><br><span class=\"line\">                    password: $(<span class=\"string\">\"#password\"</span>).val()</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">                success: (data) =&gt; &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span>(data.code == <span class=\"string\">'100'</span>)&#123;</span><br><span class=\"line\">                        window.location.href = <span class=\"string\">'/homepage'</span>;</span><br><span class=\"line\">                        console.log(data);</span><br><span class=\"line\">                    &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                        alert(<span class=\"string\">'账号或密码输入错误！'</span>);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">                error: (xhr, error) =&gt; &#123;</span><br><span class=\"line\">                    console.error(error);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            alert(<span class=\"string\">'用户名和密码不能为空！！！'</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"homepage-html-首页界面\"><a href=\"#homepage-html-首页界面\" class=\"headerlink\" title=\"homepage.html 首页界面\"></a>homepage.html 首页界面</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html lang=<span class=\"string\">\"en\"</span>&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=<span class=\"string\">\"UTF-8\"</span>&gt;</span><br><span class=\"line\">    &lt;title&gt;首页&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;h1&gt;这里是&lt;span style=<span class=\"string\">\"color: red;\"</span>&gt;首页&lt;/span&gt;&lt;/h1&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"node和MongoDB代码-register-js\"><a href=\"#node和MongoDB代码-register-js\" class=\"headerlink\" title=\"node和MongoDB代码 (register.js)\"></a>node和MongoDB代码 (register.js)</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">//引入express模块</span><br><span class=\"line\"><span class=\"built_in\">let</span> app = require(<span class=\"string\">'express'</span>)();</span><br><span class=\"line\">//引入body-parser模块:用于处理前端 post 请求发送过来的数据: npm install body-parser</span><br><span class=\"line\"><span class=\"built_in\">let</span> bodyParser = require(<span class=\"string\">'body-parser'</span>);</span><br><span class=\"line\"><span class=\"built_in\">let</span> urlEncoder = bodyParser.urlencoded(&#123;extended: <span class=\"literal\">false</span>&#125;);</span><br><span class=\"line\">//引入fs模块</span><br><span class=\"line\"><span class=\"built_in\">let</span> fs = require(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\">//引入mongoose模块</span><br><span class=\"line\"><span class=\"built_in\">let</span> mongoose = require(<span class=\"string\">'mongoose'</span>);</span><br><span class=\"line\">//建立连接</span><br><span class=\"line\">mongoose.connect(<span class=\"string\">'mongodb://localhost/text'</span>);</span><br><span class=\"line\"><span class=\"built_in\">let</span> db = mongoose.connection;</span><br><span class=\"line\">//连接失败警告</span><br><span class=\"line\">db.on(<span class=\"string\">'error'</span>, console.error.bind(console, <span class=\"string\">'connection error'</span>));</span><br><span class=\"line\">//连接成功提醒</span><br><span class=\"line\">db.once(<span class=\"string\">'open'</span>, () =&gt; &#123;</span><br><span class=\"line\">    console.log(<span class=\"string\">'连接成功！'</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">//创建一个模型骨架 Schema</span><br><span class=\"line\"><span class=\"built_in\">let</span> userSchema = mongoose.Schema(&#123;</span><br><span class=\"line\">    username: Number,</span><br><span class=\"line\">    password: Number</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">//创建模型 Model</span><br><span class=\"line\"><span class=\"built_in\">let</span> user = mongoose.model(<span class=\"string\">'user'</span>, userSchema);</span><br><span class=\"line\"></span><br><span class=\"line\">// 处理页面的返回</span><br><span class=\"line\">app.get(<span class=\"string\">\"/\"</span>, (req, res) =&gt; &#123;</span><br><span class=\"line\">    res.sendFile(__dirname + <span class=\"string\">'/register.html'</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">app.get(<span class=\"string\">'/login'</span>, (req, res) =&gt; &#123;</span><br><span class=\"line\">    res.sendFile(__dirname + <span class=\"string\">'/login.html'</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">app.get(<span class=\"string\">'/register'</span>, (req, res) =&gt; &#123;</span><br><span class=\"line\">    res.sendFile(__dirname + <span class=\"string\">'/register.html'</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">app.get(<span class=\"string\">'/homepage'</span>, (req, res) =&gt; &#123;</span><br><span class=\"line\">    res.sendFile(__dirname + <span class=\"string\">'/homepage.html'</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">//登录</span><br><span class=\"line\">app.post(<span class=\"string\">'/login'</span>, urlEncoder, (req, res) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"built_in\">let</span> data = req.body;</span><br><span class=\"line\">    <span class=\"built_in\">let</span> json = &#123;</span><br><span class=\"line\">        code: <span class=\"string\">'100'</span>,</span><br><span class=\"line\">        msg: <span class=\"string\">'OK'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    //判断数据库中如果存在有和当前输入用户名密码相同的，则执行里面的代码</span><br><span class=\"line\">    user.find(&#123;username: data.username, password: data.password&#125;, (err, users) =&gt; &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(users.length &gt; 0) &#123;</span><br><span class=\"line\">            json.code = <span class=\"string\">'100'</span>;</span><br><span class=\"line\">            res.send(json);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            json.code = <span class=\"string\">'1'</span>;</span><br><span class=\"line\">            res.send(json);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">//注册</span><br><span class=\"line\">app.post(<span class=\"string\">'/register'</span>, urlEncoder, (req, res) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"built_in\">let</span> data = req.body;</span><br><span class=\"line\">    console.log(data,<span class=\"string\">'+++++++++++++'</span>);</span><br><span class=\"line\">    <span class=\"built_in\">let</span> json = &#123;</span><br><span class=\"line\">        code: <span class=\"string\">'100'</span>,</span><br><span class=\"line\">        yesOrNot: <span class=\"string\">'0'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(data.password != <span class=\"string\">''</span> &amp;&amp; data.password != <span class=\"string\">''</span>)&#123;</span><br><span class=\"line\">        json.code = <span class=\"string\">'100'</span>;</span><br><span class=\"line\">        console.log(data.username,<span class=\"string\">\"data数据\"</span>);</span><br><span class=\"line\">        //数据库操作</span><br><span class=\"line\">        //判断数据库中如果存在有和当前输入用户名密码相同的，则执行里面的代码</span><br><span class=\"line\">        user.find(&#123;username: data.username, password: data.password&#125;, <span class=\"keyword\">function</span> (err, users) &#123;</span><br><span class=\"line\">            console.log(users,<span class=\"string\">'========'</span>,users.length);</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (err) <span class=\"built_in\">return</span> console.error(err);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (users.length == 0) &#123;</span><br><span class=\"line\">                user.create(&#123;</span><br><span class=\"line\">                    username: data.username,</span><br><span class=\"line\">                    password: data.password</span><br><span class=\"line\">                &#125;,<span class=\"keyword\">function</span> (err, msg) &#123;</span><br><span class=\"line\">                    console.log(msg,<span class=\"string\">\"00000000000\"</span>);</span><br><span class=\"line\">                &#125;);</span><br><span class=\"line\">                json.yesOrNot = <span class=\"string\">'1'</span>;</span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                console.log(<span class=\"string\">'已经注册++++++++++++'</span>);</span><br><span class=\"line\">                json.yesOrNot = <span class=\"string\">'0'</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            res.send(json);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        json.code = <span class=\"string\">'1'</span>;</span><br><span class=\"line\">        res.send(json);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">// 设置监听接口为8080</span><br><span class=\"line\">app.listen(8080);</span><br></pre></td></tr></table></figure>\n\n<p>简书: <a href=\"https://www.jianshu.com/p/a98c538c5e35\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n","categories":["Node"],"tags":["MonogoDB / Node"]},{"title":"js 正则表达式去除空格和手机号邮箱验证","url":"/2020/07/14/REGEXP/","content":"<h4 id=\"去掉左边空格\"><a href=\"#去掉左边空格\" class=\"headerlink\" title=\"去掉左边空格\"></a>去掉左边空格</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">let</span> str = msg.replace(/^\\s*/g,<span class=\"string\">\"\"</span>);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"去掉右边空格\"><a href=\"#去掉右边空格\" class=\"headerlink\" title=\"去掉右边空格\"></a>去掉右边空格</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">let</span> str =  msg.replace(/\\s*$/g,<span class=\"string\">\"\"</span>);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"去掉前后空格\"><a href=\"#去掉前后空格\" class=\"headerlink\" title=\"去掉前后空格\"></a>去掉前后空格</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">let</span> str = msg.replace(/(^\\s*)|(\\s*$)/g,<span class=\"string\">\"\"</span>);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"去掉所有空格\"><a href=\"#去掉所有空格\" class=\"headerlink\" title=\"去掉所有空格\"></a>去掉所有空格</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">let</span> str = msg.replace(/\\s+/g,<span class=\"string\">\"\"</span>);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"手机号格式验证\"><a href=\"#手机号格式验证\" class=\"headerlink\" title=\"手机号格式验证\"></a>手机号格式验证</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">let</span> reg = /^1[3|4|5|6|7|8][0-9]\\d&#123;8&#125;$/;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"邮箱格式验证\"><a href=\"#邮箱格式验证\" class=\"headerlink\" title=\"邮箱格式验证\"></a>邮箱格式验证</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">let</span> reg = /^[a-zA-Z0-9_-]+@([a-zA-Z0-9]+\\.)+(com|cn|net|org)$/;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"判断是否是中文\"><a href=\"#判断是否是中文\" class=\"headerlink\" title=\"判断是否是中文\"></a>判断是否是中文</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">let</span> reg = new RegExp(<span class=\"string\">\"[\\u4E00-\\u9FA5]+\"</span>);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"判断是否是英文\"><a href=\"#判断是否是英文\" class=\"headerlink\" title=\"判断是否是英文\"></a>判断是否是英文</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">let</span> reg = new RegExp(<span class=\"string\">\"[A-Za-z]+\"</span>);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"判断是否是数字\"><a href=\"#判断是否是数字\" class=\"headerlink\" title=\"判断是否是数字\"></a>判断是否是数字</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">let</span> reg = new RegExp(<span class=\"string\">\"[0-9]+\"</span>);</span><br></pre></td></tr></table></figure>","categories":["JS"],"tags":["JS"]},{"title":"Vue 验证码插件及使用方法","url":"/2020/07/14/SIdentity/","content":"<blockquote>\n<p>以登录界面为例(效果图)</p>\n</blockquote>\n<p><img src=\"/img/20191474-0910cb35aff1b176.jpg\" alt=\"svg\"></p>\n<h4 id=\"新建验证码组件-SIdentity\"><a href=\"#新建验证码组件-SIdentity\" class=\"headerlink\" title=\"新建验证码组件 SIdentity\"></a>新建验证码组件 SIdentity</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">    &lt;div class=<span class=\"string\">\"s-canvas\"</span>&gt;</span><br><span class=\"line\">        &lt;canvas id=<span class=\"string\">\"s-canvas\"</span> :width=<span class=\"string\">\"contentWidth\"</span> :height=<span class=\"string\">\"contentHeight\"</span>&gt;&lt;/canvas&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    <span class=\"built_in\">export</span> default &#123;</span><br><span class=\"line\">        name: <span class=\"string\">'SIdentify'</span>,</span><br><span class=\"line\">        props: &#123;</span><br><span class=\"line\">            identifyCode: &#123;</span><br><span class=\"line\">                <span class=\"built_in\">type</span>: String,</span><br><span class=\"line\">                default: <span class=\"string\">'1234'</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            fontSizeMin: &#123;</span><br><span class=\"line\">                <span class=\"built_in\">type</span>: Number,</span><br><span class=\"line\">                default: 16</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            fontSizeMax: &#123;</span><br><span class=\"line\">                <span class=\"built_in\">type</span>: Number,</span><br><span class=\"line\">                default: 40</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            backgroundColorMin: &#123;</span><br><span class=\"line\">                <span class=\"built_in\">type</span>: Number,</span><br><span class=\"line\">                default: 180</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            backgroundColorMax: &#123;</span><br><span class=\"line\">                <span class=\"built_in\">type</span>: Number,</span><br><span class=\"line\">                default: 240</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            colorMin: &#123;</span><br><span class=\"line\">                <span class=\"built_in\">type</span>: Number,</span><br><span class=\"line\">                default: 50</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            colorMax: &#123;</span><br><span class=\"line\">                <span class=\"built_in\">type</span>: Number,</span><br><span class=\"line\">                default: 160</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            lineColorMin: &#123;</span><br><span class=\"line\">                <span class=\"built_in\">type</span>: Number,</span><br><span class=\"line\">                default: 40</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            lineColorMax: &#123;</span><br><span class=\"line\">                <span class=\"built_in\">type</span>: Number,</span><br><span class=\"line\">                default: 180</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            dotColorMin: &#123;</span><br><span class=\"line\">                <span class=\"built_in\">type</span>: Number,</span><br><span class=\"line\">                default: 0</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            dotColorMax: &#123;</span><br><span class=\"line\">                <span class=\"built_in\">type</span>: Number,</span><br><span class=\"line\">                default: 255</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            contentWidth: &#123;</span><br><span class=\"line\">                <span class=\"built_in\">type</span>: Number,</span><br><span class=\"line\">                default: 112</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            contentHeight: &#123;</span><br><span class=\"line\">                <span class=\"built_in\">type</span>: Number,</span><br><span class=\"line\">                default: 38</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\">            // 生成一个随机数</span><br><span class=\"line\">            randomNum(min, max) &#123;</span><br><span class=\"line\">                <span class=\"built_in\">return</span> Math.floor(Math.random() * (max - min) + min)</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            // 生成一个随机的颜色</span><br><span class=\"line\">            randomColor(min, max) &#123;</span><br><span class=\"line\">                <span class=\"built_in\">let</span> r = this.randomNum(min, max)</span><br><span class=\"line\">                <span class=\"built_in\">let</span> g = this.randomNum(min, max)</span><br><span class=\"line\">                <span class=\"built_in\">let</span> b = this.randomNum(min, max)</span><br><span class=\"line\">                <span class=\"built_in\">return</span> <span class=\"string\">'rgb('</span> + r + <span class=\"string\">','</span> + g + <span class=\"string\">','</span> + b + <span class=\"string\">')'</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            <span class=\"function\"><span class=\"title\">drawPic</span></span>() &#123;</span><br><span class=\"line\">                <span class=\"built_in\">let</span> canvas = document.getElementById(<span class=\"string\">'s-canvas'</span>)</span><br><span class=\"line\">                <span class=\"built_in\">let</span> ctx = canvas.getContext(<span class=\"string\">'2d'</span>)</span><br><span class=\"line\">                ctx.textBaseline = <span class=\"string\">'bottom'</span></span><br><span class=\"line\">                // 绘制背景</span><br><span class=\"line\">                ctx.fillStyle = this.randomColor(this.backgroundColorMin, this.backgroundColorMax)</span><br><span class=\"line\">                ctx.fillRect(0, 0, this.contentWidth, this.contentHeight)</span><br><span class=\"line\">                // 绘制文字</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"built_in\">let</span> i = 0; i &lt; this.identifyCode.length; i++) &#123;</span><br><span class=\"line\">                    this.drawText(ctx, this.identifyCode[i], i)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                this.drawLine(ctx)</span><br><span class=\"line\">                this.drawDot(ctx)</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            drawText(ctx, txt, i) &#123;</span><br><span class=\"line\">                ctx.fillStyle = this.randomColor(this.colorMin, this.colorMax)</span><br><span class=\"line\">                ctx.font = this.randomNum(this.fontSizeMin, this.fontSizeMax) + <span class=\"string\">'px SimHei'</span></span><br><span class=\"line\">                <span class=\"built_in\">let</span> x = (i + 1) * (this.contentWidth / (this.identifyCode.length + 1))</span><br><span class=\"line\">                <span class=\"built_in\">let</span> y = this.randomNum(this.fontSizeMax, this.contentHeight - 5)</span><br><span class=\"line\">                var deg = this.randomNum(-45, 45)</span><br><span class=\"line\">                // 修改坐标原点和旋转角度</span><br><span class=\"line\">                ctx.translate(x, y)</span><br><span class=\"line\">                ctx.rotate(deg * Math.PI / 180)</span><br><span class=\"line\">                ctx.fillText(txt, 0, 0)</span><br><span class=\"line\">                // 恢复坐标原点和旋转角度</span><br><span class=\"line\">                ctx.rotate(-deg * Math.PI / 180)</span><br><span class=\"line\">                ctx.translate(-x, -y)</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            drawLine(ctx) &#123;</span><br><span class=\"line\">                // 绘制干扰线</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"built_in\">let</span> i = 0; i &lt; 8; i++) &#123;</span><br><span class=\"line\">                    ctx.strokeStyle = this.randomColor(this.lineColorMin, this.lineColorMax)</span><br><span class=\"line\">                    ctx.beginPath()</span><br><span class=\"line\">                    ctx.moveTo(this.randomNum(0, this.contentWidth), this.randomNum(0, this.contentHeight))</span><br><span class=\"line\">                    ctx.lineTo(this.randomNum(0, this.contentWidth), this.randomNum(0, this.contentHeight))</span><br><span class=\"line\">                    ctx.stroke()</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            drawDot(ctx) &#123;</span><br><span class=\"line\">                // 绘制干扰点</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"built_in\">let</span> i = 0; i &lt; 100; i++) &#123;</span><br><span class=\"line\">                    ctx.fillStyle = this.randomColor(0, 255)</span><br><span class=\"line\">                    ctx.beginPath()</span><br><span class=\"line\">                    ctx.arc(this.randomNum(0, this.contentWidth), this.randomNum(0, this.contentHeight), 1, 0, 2 * Math.PI)</span><br><span class=\"line\">                    ctx.fill()</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        watch: &#123;</span><br><span class=\"line\">            <span class=\"function\"><span class=\"title\">identifyCode</span></span>() &#123;</span><br><span class=\"line\">                this.drawPic()</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">mounted</span></span>() &#123;</span><br><span class=\"line\">            this.drawPic()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\">&lt;style&gt;</span><br><span class=\"line\">    .s-canvas &#123;</span><br><span class=\"line\">        height: 38px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    canvas &#123;</span><br><span class=\"line\">        margin-top: 1px;</span><br><span class=\"line\">        margin-left: 8px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&lt;/style&gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"在所需界面中引入组件-HTML代码如下\"><a href=\"#在所需界面中引入组件-HTML代码如下\" class=\"headerlink\" title=\"在所需界面中引入组件(HTML代码如下)\"></a>在所需界面中引入组件(HTML代码如下)</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">   &lt;div class=<span class=\"string\">\"aric-main\"</span>&gt;</span><br><span class=\"line\">    &lt;img src=<span class=\"string\">\"../assets/thbg.png\"</span>&gt;</span><br><span class=\"line\">    &lt;el-form :model=<span class=\"string\">\"ruleForm\"</span> status-icon :rules=<span class=\"string\">\"rules\"</span> ref=<span class=\"string\">\"ruleForm\"</span> label-width=<span class=\"string\">\"100px\"</span> class=<span class=\"string\">\"demo-ruleForm aric-login-form\"</span>&gt;</span><br><span class=\"line\">      &lt;el-form-item label=<span class=\"string\">\"用户名\"</span> prop=<span class=\"string\">\"username\"</span>&gt;</span><br><span class=\"line\">        &lt;el-input placeholder=<span class=\"string\">\"请输入手机号\"</span> v-model.number=<span class=\"string\">\"ruleForm.username\"</span> clearable&gt;&lt;/el-input&gt;</span><br><span class=\"line\">      &lt;/el-form-item&gt;</span><br><span class=\"line\">      &lt;el-form-item label=<span class=\"string\">\"密码\"</span> prop=<span class=\"string\">\"pass\"</span>&gt;</span><br><span class=\"line\">        &lt;el-input placeholder=<span class=\"string\">\"请输入密码\"</span> <span class=\"built_in\">type</span>=<span class=\"string\">\"password\"</span> v-model=<span class=\"string\">\"ruleForm.pass\"</span> show-password clearable&gt;&lt;/el-input&gt;</span><br><span class=\"line\">      &lt;/el-form-item&gt;</span><br><span class=\"line\">      &lt;el-form-item label=<span class=\"string\">\"验证码\"</span> prop=<span class=\"string\">\"validate\"</span>&gt;</span><br><span class=\"line\">        &lt;el-input class=<span class=\"string\">\"aric-yanzheng\"</span> placeholder=<span class=\"string\">\"请输入验证码\"</span> <span class=\"built_in\">type</span>=<span class=\"string\">\"text\"</span> v-model=<span class=\"string\">\"ruleForm.validate\"</span>&gt;&lt;/el-input&gt;</span><br><span class=\"line\">        &lt;div class=<span class=\"string\">\"login-code\"</span> @click=<span class=\"string\">\"refreshCode\"</span>&gt;</span><br><span class=\"line\">          &lt;Identify :identifyCode=<span class=\"string\">\"identifyCode\"</span>&gt;&lt;/Identify&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">      &lt;/el-form-item&gt;</span><br><span class=\"line\">      &lt;el-form-item&gt;</span><br><span class=\"line\">        &lt;el-button <span class=\"built_in\">type</span>=<span class=\"string\">\"primary\"</span> @click=<span class=\"string\">\"submitForm('ruleForm')\"</span>&gt;提交&lt;/el-button&gt;</span><br><span class=\"line\">        &lt;el-button @click=<span class=\"string\">\"registerClick\"</span>&gt;注册&lt;/el-button&gt;</span><br><span class=\"line\">        &lt;span class=<span class=\"string\">\"aric-foget-btn\"</span> @click=<span class=\"string\">\"Forgetpass\"</span>&gt;?忘记密码&lt;/span&gt;</span><br><span class=\"line\">      &lt;/el-form-item&gt;</span><br><span class=\"line\">    &lt;/el-form&gt;</span><br><span class=\"line\">  &lt;/div&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"JS代码如下\"><a href=\"#JS代码如下\" class=\"headerlink\" title=\"JS代码如下\"></a>JS代码如下</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">  import Identify from <span class=\"string\">'../components/SIdentity.vue'</span>;</span><br><span class=\"line\">  <span class=\"built_in\">export</span> default &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'login'</span>,</span><br><span class=\"line\">    template: &#123;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    components: &#123;</span><br><span class=\"line\">      Identify</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">data</span></span>() &#123;</span><br><span class=\"line\">      var checkPhone = (rule, value, callback) =&gt; &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!value) &#123;</span><br><span class=\"line\">          <span class=\"built_in\">return</span> callback(new Error(<span class=\"string\">'手机号不能为空'</span>));</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          const reg = /^1[3|4|5|7|8][0-9]\\d&#123;8&#125;$/</span><br><span class=\"line\">          console.log(reg.test(value));</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (reg.test(value)) &#123;</span><br><span class=\"line\">            callback();</span><br><span class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span> callback(new Error(<span class=\"string\">'手机号格式错误'</span>));</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">      const validateVerifycode = (rule, value, callback) =&gt; &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!value) &#123;</span><br><span class=\"line\">            callback(new Error(<span class=\"string\">'请输入验证码'</span>));</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (value != this.identifyCode) &#123;</span><br><span class=\"line\">            console.log(<span class=\"string\">'validateVerifycode:'</span>, value)</span><br><span class=\"line\">            this.ruleForm.validate = <span class=\"string\">''</span></span><br><span class=\"line\">            this.refreshCode()</span><br><span class=\"line\">            callback(new Error(<span class=\"string\">'验证码不正确!'</span>));</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            callback();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">      <span class=\"built_in\">return</span> &#123;</span><br><span class=\"line\">        // isDebugLogin: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        identifyCodes: <span class=\"string\">'123456789'</span>,</span><br><span class=\"line\">        identifyCode: <span class=\"string\">''</span>,</span><br><span class=\"line\">        ruleForm: &#123;</span><br><span class=\"line\">          pass: <span class=\"string\">''</span>,</span><br><span class=\"line\">          username: <span class=\"string\">''</span>,</span><br><span class=\"line\">          validate: <span class=\"string\">''</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        rules: &#123;</span><br><span class=\"line\">          username: [</span><br><span class=\"line\">            // &#123; required: <span class=\"literal\">true</span>, message: <span class=\"string\">'请输入用户名'</span>, trigger: <span class=\"string\">'blur'</span> &#125;,</span><br><span class=\"line\">            // &#123; min: 3, max: 8, message: <span class=\"string\">'长度为 3 到 8 个字符'</span>, trigger: <span class=\"string\">'blur'</span> &#125;</span><br><span class=\"line\">            &#123; validator: checkPhone, required: <span class=\"literal\">true</span>, trigger: <span class=\"string\">'blur'</span> &#125;</span><br><span class=\"line\">          ],</span><br><span class=\"line\">          pass: [</span><br><span class=\"line\">            &#123; required: <span class=\"literal\">true</span>, message: <span class=\"string\">'请输入密码'</span>, trigger: <span class=\"string\">'blur'</span> &#125;,</span><br><span class=\"line\">            &#123; min: 6, max: 17, message: <span class=\"string\">'长度为 6 到 17 个字符'</span>, trigger: <span class=\"string\">'change'</span> &#125;</span><br><span class=\"line\">          ],</span><br><span class=\"line\">          validate: [</span><br><span class=\"line\">            &#123; validator: validateVerifycode, required: <span class=\"literal\">true</span>, trigger: <span class=\"string\">'blur'</span> &#125;</span><br><span class=\"line\">          ]</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">mounted</span></span> () &#123;</span><br><span class=\"line\">      // 初始化验证码</span><br><span class=\"line\">      this.identifyCode = <span class=\"string\">''</span></span><br><span class=\"line\">      this.makeCode(this.identifyCodes, 4)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    methods: &#123;</span><br><span class=\"line\">      randomNum(min, max) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> Math.floor(Math.random() * (max - min) + min)</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"function\"><span class=\"title\">refreshCode</span></span>() &#123;</span><br><span class=\"line\">        this.identifyCode = <span class=\"string\">''</span></span><br><span class=\"line\">        this.makeCode(this.identifyCodes, 4)</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      makeCode(o, l) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"built_in\">let</span> i = 0; i &lt; l; i++) &#123;</span><br><span class=\"line\">          this.identifyCode += this.identifyCodes[</span><br><span class=\"line\">            this.randomNum(0, this.identifyCodes.length)</span><br><span class=\"line\">          ]</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      submitForm(formName) &#123;</span><br><span class=\"line\">        this.<span class=\"variable\">$refs</span>[formName].validate((valid) =&gt; &#123;</span><br><span class=\"line\">          console.log(valid)</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (valid) &#123;</span><br><span class=\"line\">            alert(<span class=\"string\">'submit!'</span>);</span><br><span class=\"line\">            // 发送请求给后台,请求数据成功之后</span><br><span class=\"line\">            this.<span class=\"variable\">$router</span>.push(<span class=\"string\">'/home'</span>)</span><br><span class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            console.log(<span class=\"string\">'error submit!!'</span>);</span><br><span class=\"line\">            <span class=\"built_in\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"function\"><span class=\"title\">created</span></span>() &#123;</span><br><span class=\"line\">        this.refreshCode()</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"function\"><span class=\"title\">registerClick</span></span>() &#123;</span><br><span class=\"line\">        this.<span class=\"variable\">$router</span>.push(<span class=\"string\">'/register'</span>);</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"function\"><span class=\"title\">Forgetpass</span></span>() &#123;</span><br><span class=\"line\">        this.<span class=\"variable\">$router</span>.push( <span class=\"string\">'/forget'</span> )</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>","categories":["VUE"],"tags":["VUE"]},{"title":"Vue自定义组件","url":"/2020/07/17/VueInstallComponent/","content":"<h3 id=\"在vue项目中，在有自定义组件需求的时候，可以像element-ui一样使用Vue-use（）方法来使用，具体实现方法如下：\"><a href=\"#在vue项目中，在有自定义组件需求的时候，可以像element-ui一样使用Vue-use（）方法来使用，具体实现方法如下：\" class=\"headerlink\" title=\"在vue项目中，在有自定义组件需求的时候，可以像element-ui一样使用Vue.use（）方法来使用，具体实现方法如下：\"></a>在vue项目中，在有自定义组件需求的时候，可以像element-ui一样使用Vue.use（）方法来使用，具体实现方法如下：</h3><blockquote>\n<p>在components目录下新建一个<code>Component</code>文件夹<br>在文件夹里创建<code>MyComponent.vue</code>文件</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">// MyComponent.vue</span><br><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;div&gt;</span><br><span class=\"line\">      这是一个组件</span><br><span class=\"line\">  &lt;/div&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">  <span class=\"built_in\">export</span> default &#123;</span><br><span class=\"line\">    name:<span class=\"string\">'MyComponent'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\">&lt;style scoped&gt;</span><br><span class=\"line\">  div&#123;</span><br><span class=\"line\">    width: 100%;</span><br><span class=\"line\">    font-size:20px;</span><br><span class=\"line\">    color: blue;</span><br><span class=\"line\">    text-align:center;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&lt;/style&gt;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>在Component目录下创建一个index.js文件,在这个文件中使用install方法来全局注册该组件</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">// 引入组件</span><br><span class=\"line\">import IsMyComponent from <span class=\"string\">'./MyComponent.vue'</span></span><br><span class=\"line\">// 定义 Loading 对象</span><br><span class=\"line\">const MyComponentName = &#123;</span><br><span class=\"line\">  // install 是默认的方法。当外界在 use 这个组件的时候，就会调用本身的 install 方法，同时传一个 Vue 这个类的参数。</span><br><span class=\"line\">  install:<span class=\"keyword\">function</span>(Vue)&#123;</span><br><span class=\"line\">      Vue.component(<span class=\"string\">'MyComponentName'</span>,IsMyComponent)  //<span class=\"string\">'MyComponentName'</span>是后面可以使用的组件的名字</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">// 导出该组件</span><br><span class=\"line\"><span class=\"built_in\">export</span> default MyComponentName</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>使用方法,在<code>main.js</code>中引用并注册组件</p>\n</blockquote>\n<p>只要在index.js里规定了install方法，就可以向其他ui组件库那样，使用Vue.use()来全局使用</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">// 引入组件</span><br><span class=\"line\">import MyComponentName from <span class=\"string\">'./components/Component/index'</span> //上面定义的组件</span><br><span class=\"line\">// 注册组件</span><br><span class=\"line\">Vue.use(MyComponentName)</span><br><span class=\"line\"></span><br><span class=\"line\">. . .</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>在组件中使用</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">// 在需要的地方直接引用即可</span><br><span class=\"line\">&lt;MyComponentName&gt;&lt;/MyComponentName&gt;</span><br></pre></td></tr></table></figure>","categories":["VUE"],"tags":["VUE"]},{"title":"vue 实现打印功能","url":"/2020/07/14/VuePrint/","content":"<h4 id=\"安装插件\"><a href=\"#安装插件\" class=\"headerlink\" title=\"安装插件\"></a>安装插件</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install vue-print-nb --save</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"在-main-js-里引入\"><a href=\"#在-main-js-里引入\" class=\"headerlink\" title=\"在 main.js 里引入\"></a>在 main.js 里引入</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">import Print from <span class=\"string\">'vue-print-nb'</span>;</span><br><span class=\"line\">Vue.use(Print);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"然后就可以实现打印功能了\"><a href=\"#然后就可以实现打印功能了\" class=\"headerlink\" title=\"然后就可以实现打印功能了\"></a>然后就可以实现打印功能了</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">//这里是个小例子</span><br><span class=\"line\">// 通过设置 id 来获取需要打印的区域</span><br><span class=\"line\">&lt;div id=<span class=\"string\">\"print-list\"</span> &gt;</span><br><span class=\"line\">  &lt;p&gt;这里是要打印的内容&lt;/p&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">// 通过绑定 v-print 触发打印效果</span><br><span class=\"line\">&lt;button v-print=<span class=\"string\">\"'#print-list'\"</span>&gt;打印测试&lt;/button&gt;</span><br></pre></td></tr></table></figure>","categories":["VUE"],"tags":["VUE"]},{"title":"使用SVG画圆环(带填充动画)","url":"/2020/07/14/SVG/","content":"<h3 id=\"先上效果图\"><a href=\"#先上效果图\" class=\"headerlink\" title=\"先上效果图\"></a>先上效果图</h3><p><img src=\"/img/20191474-df40d64950c72f4f.jpg\" alt=\"svg\"></p>\n<h4 id=\"1-创建组件CircleBar目录-再目录中创建CircleBar组件\"><a href=\"#1-创建组件CircleBar目录-再目录中创建CircleBar组件\" class=\"headerlink\" title=\"1.创建组件CircleBar目录,再目录中创建CircleBar组件\"></a>1.创建组件CircleBar目录,再目录中创建CircleBar组件</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">    &lt;div class=<span class=\"string\">\"sqFinancialSmall\"</span>&gt;</span><br><span class=\"line\">        &lt;svg viewBox=<span class=\"string\">\"0 0 100 100\"</span>&gt;</span><br><span class=\"line\">            &lt;path d=<span class=\"string\">\"</span></span><br><span class=\"line\"><span class=\"string\">                M 50 50</span></span><br><span class=\"line\"><span class=\"string\">                m 0 -47</span></span><br><span class=\"line\"><span class=\"string\">                a 47 47 0 1 1 0 94</span></span><br><span class=\"line\"><span class=\"string\">                a 47 47 0 1 1 0 -94</span></span><br><span class=\"line\"><span class=\"string\">                \"</span> </span><br><span class=\"line\">                stroke=<span class=\"string\">\"#e5e9f2\"</span></span><br><span class=\"line\">                stroke-width=<span class=\"string\">\"4\"</span></span><br><span class=\"line\">                fill=<span class=\"string\">\"none\"</span></span><br><span class=\"line\">                style=<span class=\"string\">\"stroke-dasharray: 304.7px, 295.31px; stroke-dashoffset: 4px;\"</span>&gt;</span><br><span class=\"line\">            &lt;/path&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">            &lt;path d=<span class=\"string\">\"</span></span><br><span class=\"line\"><span class=\"string\">                M 50 50</span></span><br><span class=\"line\"><span class=\"string\">                m 0 -47</span></span><br><span class=\"line\"><span class=\"string\">                a 47 47 0 1 1 0 94</span></span><br><span class=\"line\"><span class=\"string\">                a 47 47 0 1 1 0 -94</span></span><br><span class=\"line\"><span class=\"string\">                \"</span> </span><br><span class=\"line\">                :stroke=<span class=\"string\">\"color\"</span> :stroke-dasharray=<span class=\"string\">\"strokeDasharray\"</span> fill=<span class=\"string\">\"none\"</span> stroke-linecap=<span class=\"string\">\"round\"</span> stroke-width=<span class=\"string\">\"4\"</span>   style=<span class=\"string\">\"stroke-dashoffset: 0px;transition: stroke-dasharray 0.6s ease 0s, stroke 0.6s ease 0s;\"</span>&gt;</span><br><span class=\"line\">            &lt;/path&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">            &lt;path d=<span class=\"string\">\"</span></span><br><span class=\"line\"><span class=\"string\">                M 50 50</span></span><br><span class=\"line\"><span class=\"string\">                m 0 -47</span></span><br><span class=\"line\"><span class=\"string\">                a 47 47 0 1 1 0 94</span></span><br><span class=\"line\"><span class=\"string\">                a 47 47 0 1 1 0 -94</span></span><br><span class=\"line\"><span class=\"string\">                \"</span></span><br><span class=\"line\">                :stroke=<span class=\"string\">\"TwoFullColor\"</span> v-if=<span class=\"string\">\"progress&gt;100\"</span> :stroke-dasharray=<span class=\"string\">\"strokeDasharray1\"</span> fill=<span class=\"string\">\"none\"</span> stroke-linecap=<span class=\"string\">\"round\"</span> stroke-width=<span class=\"string\">\"4\"</span>   style=<span class=\"string\">\"stroke-dashoffset: 0px;transition: stroke-dasharray 0.6s ease 0s, stroke 0.6s ease 0s;\"</span>&gt;</span><br><span class=\"line\">            &lt;/path&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;/svg&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;div class=<span class=\"string\">\"svgContent\"</span>&gt;</span><br><span class=\"line\">            &lt;div class=<span class=\"string\">\"title\"</span>&gt;&#123;&#123;sqtitle1&#125;&#125;&lt;/div&gt;</span><br><span class=\"line\">            &lt;div class=<span class=\"string\">\"title\"</span>&gt;&#123;&#123;sqtitle2&#125;&#125;&lt;/div&gt;</span><br><span class=\"line\">            &lt;div v-if=<span class=\"string\">\"titleNum\"</span> :style=<span class=\"string\">\"&#123;color:color&#125;\"</span> class=<span class=\"string\">\"titleNum\"</span>&gt;&#123;&#123;titleNum&#125;&#125;&lt;/div&gt;</span><br><span class=\"line\">            &lt;div v-if=<span class=\"string\">\"!titleNum\"</span> style=<span class=\"string\">\"font-size:14px;color:#999999;\"</span> class=<span class=\"string\">\"titleNum\"</span>&gt;暂未开放&lt;/div&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">  <span class=\"built_in\">export</span> default &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'sqFinancialSmall'</span>,</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">data</span></span>()&#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> &#123;</span><br><span class=\"line\">            lineLength:2*Math.PI * 46.45,</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    computed: &#123;</span><br><span class=\"line\">        strokeDasharray: <span class=\"function\"><span class=\"title\">function</span></span> () &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (this.progress&lt;=100) &#123;</span><br><span class=\"line\">                <span class=\"built_in\">let</span> percent = this.progress / 100 </span><br><span class=\"line\">                <span class=\"built_in\">let</span> lineLength = this.lineLength</span><br><span class=\"line\">                <span class=\"built_in\">return</span>  (lineLength * percent) + <span class=\"string\">\" 295.31\"</span></span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (this.progress&gt;100) &#123;</span><br><span class=\"line\">                <span class=\"built_in\">let</span> percent = 100 </span><br><span class=\"line\">                <span class=\"built_in\">let</span> lineLength = this.lineLength</span><br><span class=\"line\">                <span class=\"built_in\">return</span>  (lineLength * percent) + <span class=\"string\">\" 295.31\"</span></span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                <span class=\"built_in\">return</span> 0</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        strokeDasharray1: <span class=\"function\"><span class=\"title\">function</span></span> () &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (this.progress&lt;=100) &#123;</span><br><span class=\"line\">                <span class=\"built_in\">return</span>  <span class=\"string\">\"0 295.31\"</span></span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (this.progress&gt;100) &#123;</span><br><span class=\"line\">                <span class=\"built_in\">let</span> percent = (this.progress-100)/100</span><br><span class=\"line\">                <span class=\"built_in\">let</span> lineLength = this.lineLength</span><br><span class=\"line\">                console.log(percent)</span><br><span class=\"line\">                console.log(lineLength)</span><br><span class=\"line\">                console.log(lineLength * percent)</span><br><span class=\"line\">                <span class=\"built_in\">return</span>  (lineLength * percent) + <span class=\"string\">\" 295.31\"</span></span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                <span class=\"built_in\">return</span>  <span class=\"string\">\"0 295.31\"</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">           </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    props: &#123;</span><br><span class=\"line\">       color:&#123;</span><br><span class=\"line\">           <span class=\"built_in\">type</span>:String,</span><br><span class=\"line\">           default: <span class=\"string\">\"#88D164\"</span>,</span><br><span class=\"line\">       &#125;,</span><br><span class=\"line\">       progress:&#123;</span><br><span class=\"line\">           <span class=\"built_in\">type</span>:Number,</span><br><span class=\"line\">           default:0,</span><br><span class=\"line\">       &#125;,</span><br><span class=\"line\">       sqtitle1:&#123;</span><br><span class=\"line\">           <span class=\"built_in\">type</span>:String,</span><br><span class=\"line\">           default:<span class=\"string\">\"财务进度条\"</span>,</span><br><span class=\"line\">       &#125;,</span><br><span class=\"line\">       sqtitle2:&#123;</span><br><span class=\"line\">           <span class=\"built_in\">type</span>:String,</span><br><span class=\"line\">           default:<span class=\"string\">\"财务进度条\"</span>,</span><br><span class=\"line\">       &#125;,</span><br><span class=\"line\">       titleNum:&#123;</span><br><span class=\"line\">           <span class=\"built_in\">type</span>:Number,</span><br><span class=\"line\">           default:0,</span><br><span class=\"line\">       &#125;,</span><br><span class=\"line\">       </span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    methods: &#123;</span><br><span class=\"line\">        handleClick(evt) &#123;</span><br><span class=\"line\">            this.<span class=\"variable\">$emit</span>(<span class=\"string\">'click'</span>, evt);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;style scoped&gt;</span><br><span class=\"line\">.sqFinancialSmall&#123;</span><br><span class=\"line\">    width: 100px;</span><br><span class=\"line\">    height: 100px;</span><br><span class=\"line\">    position: relative;</span><br><span class=\"line\">    margin: auto;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.svgContent&#123;</span><br><span class=\"line\">    position: absolute;</span><br><span class=\"line\">    top: 0;</span><br><span class=\"line\">    left: 0;</span><br><span class=\"line\">    width: 100px;</span><br><span class=\"line\">    height: 100px;</span><br><span class=\"line\">    padding-top: 15px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.title&#123;</span><br><span class=\"line\">    width: 100%;</span><br><span class=\"line\">    text-align: center;</span><br><span class=\"line\">    color: <span class=\"comment\">#656565;</span></span><br><span class=\"line\">    font-size: 14px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.titleNum&#123;</span><br><span class=\"line\">    width: 100%;</span><br><span class=\"line\">    text-align: center;</span><br><span class=\"line\">    font-size: 18px;</span><br><span class=\"line\">    margin-top: 7px;</span><br><span class=\"line\">    font-family:Source Han Sans CN;</span><br><span class=\"line\">    font-weight:400;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/style&gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-在同级创建index-js文件\"><a href=\"#2-在同级创建index-js文件\" class=\"headerlink\" title=\"2.在同级创建index.js文件\"></a>2.在同级创建index.js文件</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">// 引入组件</span><br><span class=\"line\">import CircleBarfromComponent <span class=\"string\">'./CircleBar.vue'</span></span><br><span class=\"line\">// 定义 Loading 对象</span><br><span class=\"line\">const CircleBar=&#123;</span><br><span class=\"line\">    // install 是默认的方法。当外界在 use 这个组件的时候，就会调用本身的 install 方法，同时传一个 Vue 这个类的参数。</span><br><span class=\"line\">    install:<span class=\"keyword\">function</span>(Vue)&#123;</span><br><span class=\"line\">        Vue.component(<span class=\"string\">'CircleBar'</span>,CircleBarfromComponent )</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">// 导出</span><br><span class=\"line\"><span class=\"built_in\">export</span> default CircleBar</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"3-在main-js中挂载\"><a href=\"#3-在main-js中挂载\" class=\"headerlink\" title=\"3.在main.js中挂载\"></a>3.在main.js中挂载</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">import Vue from <span class=\"string\">'vue'</span>;</span><br><span class=\"line\">import App from <span class=\"string\">'./App.vue'</span>;</span><br><span class=\"line\">import router from <span class=\"string\">'./router'</span>;</span><br><span class=\"line\">import &#123; store &#125; from <span class=\"string\">'./store'</span>;</span><br><span class=\"line\">import CircleBar from <span class=\"string\">'./components/CircleBar/CircleBar/index'</span> ;</span><br><span class=\"line\"></span><br><span class=\"line\">// 中间件 引入省钱家族自定义组件模板</span><br><span class=\"line\">Vue.use(CircleBar )</span><br><span class=\"line\"></span><br><span class=\"line\">new Vue(&#123;</span><br><span class=\"line\">  router,</span><br><span class=\"line\">  store,</span><br><span class=\"line\">  render: h =&gt; h(App),</span><br><span class=\"line\">&#125;).<span class=\"variable\">$mount</span>(<span class=\"string\">'#app'</span>)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"4-使用组件\"><a href=\"#4-使用组件\" class=\"headerlink\" title=\"4.使用组件\"></a>4.使用组件</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;div&gt;</span><br><span class=\"line\">   &lt;CircleBar </span><br><span class=\"line\">       color=<span class=\"string\">\"#EA4B4B\"</span></span><br><span class=\"line\">       :progress=<span class=\"string\">\"progress\"</span></span><br><span class=\"line\">       sqtitle1=<span class=\"string\">\"文字信息一\"</span></span><br><span class=\"line\">       sqtitle2=<span class=\"string\">\"文字信息二\"</span></span><br><span class=\"line\">    &gt;&lt;/CircleBar &gt;</span><br><span class=\"line\">  &lt;/div&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\"><span class=\"built_in\">export</span> default &#123;</span><br><span class=\"line\">  name: <span class=\"string\">\"home\"</span>,</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">data</span></span>() &#123;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> &#123;</span><br><span class=\"line\">      progress:0,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">mounted</span></span>() &#123;</span><br><span class=\"line\">    this.progress = 100;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<p>简书: <a href=\"https://www.jianshu.com/p/228e75befd51\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n","categories":["VUE"],"tags":["VUE / SVG"]},{"title":"Vue+Element实现文件上传和下载","url":"/2020/07/15/VueFileDownload/","content":"<h3 id=\"下载\"><a href=\"#下载\" class=\"headerlink\" title=\"下载\"></a>下载</h3><h6 id=\"在下载成功后-调用以下代码进行下载\"><a href=\"#在下载成功后-调用以下代码进行下载\" class=\"headerlink\" title=\"在下载成功后,调用以下代码进行下载\"></a>在下载成功后,调用以下代码进行下载</h6><p><code>data为后台传过来的二进制文件对象</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">let</span> blob = new Blob([data], &#123;</span><br><span class=\"line\">  <span class=\"built_in\">type</span>:</span><br><span class=\"line\">    <span class=\"string\">\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8\"</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"built_in\">let</span> downloadElement = document.createElement(<span class=\"string\">\"a\"</span>);</span><br><span class=\"line\"><span class=\"built_in\">let</span> href = window.URL.createObjectURL(blob);</span><br><span class=\"line\">downloadElement.href = href;</span><br><span class=\"line\">downloadElement.download = <span class=\"string\">\"测试下载文件.xls\"</span>; // xxx.xls/xxx.xlsx</span><br><span class=\"line\">document.body.appendChild(downloadElement);</span><br><span class=\"line\">downloadElement.click();</span><br><span class=\"line\">document.body.removeChild(downloadElement);</span><br><span class=\"line\">window.URL.revokeObjectURL(href);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"上传\"><a href=\"#上传\" class=\"headerlink\" title=\"上传\"></a>上传</h3><h6 id=\"使用elementUI里的Upload组件进项上传-配置如下\"><a href=\"#使用elementUI里的Upload组件进项上传-配置如下\" class=\"headerlink\" title=\"使用elementUI里的Upload组件进项上传,配置如下\"></a>使用elementUI里的Upload组件进项上传,配置如下</h6><p><code>html代码</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;el-upload</span><br><span class=\"line\">  class=<span class=\"string\">\"upload-demo\"</span></span><br><span class=\"line\">  :action=<span class=\"string\">\"/api\"</span></span><br><span class=\"line\">  accept = <span class=\"string\">\".xls, .xlsx\"</span></span><br><span class=\"line\">  :headers=<span class=\"string\">\"setToken()\"</span></span><br><span class=\"line\">  :show-file-list = <span class=\"string\">\"false\"</span></span><br><span class=\"line\">  :on-success=<span class=\"string\">\"handleSuccessFile\"</span></span><br><span class=\"line\">  :on-error=<span class=\"string\">\"handleErrorFile\"</span></span><br><span class=\"line\">&gt;</span><br><span class=\"line\">  &lt;el-button <span class=\"built_in\">type</span>=<span class=\"string\">\"primary\"</span> plain&gt;上传Excel表格&lt;/el-button&gt;</span><br><span class=\"line\">&lt;/el-upload&gt;</span><br></pre></td></tr></table></figure>\n<p><code>Js代码</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"title\">setToken</span></span>()&#123;</span><br><span class=\"line\">  <span class=\"built_in\">return</span>&#123;</span><br><span class=\"line\">    <span class=\"string\">\"Authorization\"</span>: localStorage.getItem(<span class=\"string\">\"token\"</span>),</span><br><span class=\"line\">    responseType: <span class=\"string\">'blob'</span>,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">// 成功回调,提示成功并进行下载</span><br><span class=\"line\">handleSuccessFile(response) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(response)&#123;</span><br><span class=\"line\">    this.<span class=\"variable\">$message</span>.success(<span class=\"string\">'文件上传成功'</span>)</span><br><span class=\"line\">    var blob = new Blob([response], &#123;</span><br><span class=\"line\">      <span class=\"built_in\">type</span>: <span class=\"string\">'application/vnd.ms-excel;charset=utf-8'</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    var downloadElement = document.createElement(<span class=\"string\">'a'</span>);</span><br><span class=\"line\">    var href = window.URL.createObjectURL(blob); //创建下载的链接</span><br><span class=\"line\">    downloadElement.href = href;</span><br><span class=\"line\">    downloadElement.download = <span class=\"string\">'测试下载文件.xls'</span>; //下载后文件名</span><br><span class=\"line\">    document.body.appendChild(downloadElement);</span><br><span class=\"line\">    downloadElement.click(); //点击下载</span><br><span class=\"line\">    document.body.removeChild(downloadElement); //下载完成移除元素</span><br><span class=\"line\">    window.URL.revokeObjectURL(href); //释放掉blob对象</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">// 上传失败回调进行提示</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">handleErrorFile</span></span>()&#123;</span><br><span class=\"line\">  this.<span class=\"variable\">$message</span>.error(<span class=\"string\">'文件上传失败'</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","categories":["VUE"],"tags":["VUE"]},{"title":"Vue 验证码插件及使用方法","url":"/2020/07/08/VerificationCode/","content":"<p>简书: <a href=\"https://www.jianshu.com/p/0801b2d51d64\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h2 id=\"新建验证码组件-SIdentity\"><a href=\"#新建验证码组件-SIdentity\" class=\"headerlink\" title=\"新建验证码组件 SIdentity\"></a>新建验证码组件 SIdentity</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">    &lt;div class=<span class=\"string\">\"s-canvas\"</span>&gt;</span><br><span class=\"line\">        &lt;canvas id=<span class=\"string\">\"s-canvas\"</span> :width=<span class=\"string\">\"contentWidth\"</span> :height=<span class=\"string\">\"contentHeight\"</span>&gt;&lt;/canvas&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    <span class=\"built_in\">export</span> default &#123;</span><br><span class=\"line\">        name: <span class=\"string\">'SIdentify'</span>,</span><br><span class=\"line\">        props: &#123;</span><br><span class=\"line\">            identifyCode: &#123;</span><br><span class=\"line\">                <span class=\"built_in\">type</span>: String,</span><br><span class=\"line\">                default: <span class=\"string\">'1234'</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            fontSizeMin: &#123;</span><br><span class=\"line\">                <span class=\"built_in\">type</span>: Number,</span><br><span class=\"line\">                default: 16</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            fontSizeMax: &#123;</span><br><span class=\"line\">                <span class=\"built_in\">type</span>: Number,</span><br><span class=\"line\">                default: 40</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            backgroundColorMin: &#123;</span><br><span class=\"line\">                <span class=\"built_in\">type</span>: Number,</span><br><span class=\"line\">                default: 180</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            backgroundColorMax: &#123;</span><br><span class=\"line\">                <span class=\"built_in\">type</span>: Number,</span><br><span class=\"line\">                default: 240</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            colorMin: &#123;</span><br><span class=\"line\">                <span class=\"built_in\">type</span>: Number,</span><br><span class=\"line\">                default: 50</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            colorMax: &#123;</span><br><span class=\"line\">                <span class=\"built_in\">type</span>: Number,</span><br><span class=\"line\">                default: 160</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            lineColorMin: &#123;</span><br><span class=\"line\">                <span class=\"built_in\">type</span>: Number,</span><br><span class=\"line\">                default: 40</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            lineColorMax: &#123;</span><br><span class=\"line\">                <span class=\"built_in\">type</span>: Number,</span><br><span class=\"line\">                default: 180</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            dotColorMin: &#123;</span><br><span class=\"line\">                <span class=\"built_in\">type</span>: Number,</span><br><span class=\"line\">                default: 0</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            dotColorMax: &#123;</span><br><span class=\"line\">                <span class=\"built_in\">type</span>: Number,</span><br><span class=\"line\">                default: 255</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            contentWidth: &#123;</span><br><span class=\"line\">                <span class=\"built_in\">type</span>: Number,</span><br><span class=\"line\">                default: 112</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            contentHeight: &#123;</span><br><span class=\"line\">                <span class=\"built_in\">type</span>: Number,</span><br><span class=\"line\">                default: 38</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\">            // 生成一个随机数</span><br><span class=\"line\">            randomNum(min, max) &#123;</span><br><span class=\"line\">                <span class=\"built_in\">return</span> Math.floor(Math.random() * (max - min) + min)</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            // 生成一个随机的颜色</span><br><span class=\"line\">            randomColor(min, max) &#123;</span><br><span class=\"line\">                <span class=\"built_in\">let</span> r = this.randomNum(min, max)</span><br><span class=\"line\">                <span class=\"built_in\">let</span> g = this.randomNum(min, max)</span><br><span class=\"line\">                <span class=\"built_in\">let</span> b = this.randomNum(min, max)</span><br><span class=\"line\">                <span class=\"built_in\">return</span> <span class=\"string\">'rgb('</span> + r + <span class=\"string\">','</span> + g + <span class=\"string\">','</span> + b + <span class=\"string\">')'</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            <span class=\"function\"><span class=\"title\">drawPic</span></span>() &#123;</span><br><span class=\"line\">                <span class=\"built_in\">let</span> canvas = document.getElementById(<span class=\"string\">'s-canvas'</span>)</span><br><span class=\"line\">                <span class=\"built_in\">let</span> ctx = canvas.getContext(<span class=\"string\">'2d'</span>)</span><br><span class=\"line\">                ctx.textBaseline = <span class=\"string\">'bottom'</span></span><br><span class=\"line\">                // 绘制背景</span><br><span class=\"line\">                ctx.fillStyle = this.randomColor(this.backgroundColorMin, this.backgroundColorMax)</span><br><span class=\"line\">                ctx.fillRect(0, 0, this.contentWidth, this.contentHeight)</span><br><span class=\"line\">                // 绘制文字</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"built_in\">let</span> i = 0; i &lt; this.identifyCode.length; i++) &#123;</span><br><span class=\"line\">                    this.drawText(ctx, this.identifyCode[i], i)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                this.drawLine(ctx)</span><br><span class=\"line\">                this.drawDot(ctx)</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            drawText(ctx, txt, i) &#123;</span><br><span class=\"line\">                ctx.fillStyle = this.randomColor(this.colorMin, this.colorMax)</span><br><span class=\"line\">                ctx.font = this.randomNum(this.fontSizeMin, this.fontSizeMax) + <span class=\"string\">'px SimHei'</span></span><br><span class=\"line\">                <span class=\"built_in\">let</span> x = (i + 1) * (this.contentWidth / (this.identifyCode.length + 1))</span><br><span class=\"line\">                <span class=\"built_in\">let</span> y = this.randomNum(this.fontSizeMax, this.contentHeight - 5)</span><br><span class=\"line\">                var deg = this.randomNum(-45, 45)</span><br><span class=\"line\">                // 修改坐标原点和旋转角度</span><br><span class=\"line\">                ctx.translate(x, y)</span><br><span class=\"line\">                ctx.rotate(deg * Math.PI / 180)</span><br><span class=\"line\">                ctx.fillText(txt, 0, 0)</span><br><span class=\"line\">                // 恢复坐标原点和旋转角度</span><br><span class=\"line\">                ctx.rotate(-deg * Math.PI / 180)</span><br><span class=\"line\">                ctx.translate(-x, -y)</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            drawLine(ctx) &#123;</span><br><span class=\"line\">                // 绘制干扰线</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"built_in\">let</span> i = 0; i &lt; 8; i++) &#123;</span><br><span class=\"line\">                    ctx.strokeStyle = this.randomColor(this.lineColorMin, this.lineColorMax)</span><br><span class=\"line\">                    ctx.beginPath()</span><br><span class=\"line\">                    ctx.moveTo(this.randomNum(0, this.contentWidth), this.randomNum(0, this.contentHeight))</span><br><span class=\"line\">                    ctx.lineTo(this.randomNum(0, this.contentWidth), this.randomNum(0, this.contentHeight))</span><br><span class=\"line\">                    ctx.stroke()</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            drawDot(ctx) &#123;</span><br><span class=\"line\">                // 绘制干扰点</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"built_in\">let</span> i = 0; i &lt; 100; i++) &#123;</span><br><span class=\"line\">                    ctx.fillStyle = this.randomColor(0, 255)</span><br><span class=\"line\">                    ctx.beginPath()</span><br><span class=\"line\">                    ctx.arc(this.randomNum(0, this.contentWidth), this.randomNum(0, this.contentHeight), 1, 0, 2 * Math.PI)</span><br><span class=\"line\">                    ctx.fill()</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        watch: &#123;</span><br><span class=\"line\">            <span class=\"function\"><span class=\"title\">identifyCode</span></span>() &#123;</span><br><span class=\"line\">                this.drawPic()</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">mounted</span></span>() &#123;</span><br><span class=\"line\">            this.drawPic()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\">&lt;style&gt;</span><br><span class=\"line\">    .s-canvas &#123;</span><br><span class=\"line\">        height: 38px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    canvas &#123;</span><br><span class=\"line\">        margin-top: 1px;</span><br><span class=\"line\">        margin-left: 8px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&lt;/style&gt;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"在所需界面中引入组件\"><a href=\"#在所需界面中引入组件\" class=\"headerlink\" title=\"在所需界面中引入组件\"></a>在所需界面中引入组件</h2><blockquote>\n<p>HTML 代码如下</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">   &lt;div class=<span class=\"string\">\"aric-main\"</span>&gt;</span><br><span class=\"line\">    &lt;img src=<span class=\"string\">\"../assets/thbg.png\"</span>&gt;</span><br><span class=\"line\">    &lt;el-form :model=<span class=\"string\">\"ruleForm\"</span> status-icon :rules=<span class=\"string\">\"rules\"</span> ref=<span class=\"string\">\"ruleForm\"</span> label-width=<span class=\"string\">\"100px\"</span> class=<span class=\"string\">\"demo-ruleForm aric-login-form\"</span>&gt;</span><br><span class=\"line\">      &lt;el-form-item label=<span class=\"string\">\"用户名\"</span> prop=<span class=\"string\">\"username\"</span>&gt;</span><br><span class=\"line\">        &lt;el-input placeholder=<span class=\"string\">\"请输入手机号\"</span> v-model.number=<span class=\"string\">\"ruleForm.username\"</span> clearable&gt;&lt;/el-input&gt;</span><br><span class=\"line\">      &lt;/el-form-item&gt;</span><br><span class=\"line\">      &lt;el-form-item label=<span class=\"string\">\"密码\"</span> prop=<span class=\"string\">\"pass\"</span>&gt;</span><br><span class=\"line\">        &lt;el-input placeholder=<span class=\"string\">\"请输入密码\"</span> <span class=\"built_in\">type</span>=<span class=\"string\">\"password\"</span> v-model=<span class=\"string\">\"ruleForm.pass\"</span> show-password clearable&gt;&lt;/el-input&gt;</span><br><span class=\"line\">      &lt;/el-form-item&gt;</span><br><span class=\"line\">      &lt;el-form-item label=<span class=\"string\">\"验证码\"</span> prop=<span class=\"string\">\"validate\"</span>&gt;</span><br><span class=\"line\">        &lt;el-input class=<span class=\"string\">\"aric-yanzheng\"</span> placeholder=<span class=\"string\">\"请输入验证码\"</span> <span class=\"built_in\">type</span>=<span class=\"string\">\"text\"</span> v-model=<span class=\"string\">\"ruleForm.validate\"</span>&gt;&lt;/el-input&gt;</span><br><span class=\"line\">        &lt;div class=<span class=\"string\">\"login-code\"</span> @click=<span class=\"string\">\"refreshCode\"</span>&gt;</span><br><span class=\"line\">          &lt;Identify :identifyCode=<span class=\"string\">\"identifyCode\"</span>&gt;&lt;/Identify&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">      &lt;/el-form-item&gt;</span><br><span class=\"line\">      &lt;el-form-item&gt;</span><br><span class=\"line\">        &lt;el-button <span class=\"built_in\">type</span>=<span class=\"string\">\"primary\"</span> @click=<span class=\"string\">\"submitForm('ruleForm')\"</span>&gt;提交&lt;/el-button&gt;</span><br><span class=\"line\">        &lt;el-button @click=<span class=\"string\">\"registerClick\"</span>&gt;注册&lt;/el-button&gt;</span><br><span class=\"line\">        &lt;span class=<span class=\"string\">\"aric-foget-btn\"</span> @click=<span class=\"string\">\"Forgetpass\"</span>&gt;?忘记密码&lt;/span&gt;</span><br><span class=\"line\">      &lt;/el-form-item&gt;</span><br><span class=\"line\">    &lt;/el-form&gt;</span><br><span class=\"line\">  &lt;/div&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>JS代码如下 </p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">  import Identify from <span class=\"string\">'../components/SIdentity.vue'</span>;</span><br><span class=\"line\">  <span class=\"built_in\">export</span> default &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'login'</span>,</span><br><span class=\"line\">    template: &#123;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    components: &#123;</span><br><span class=\"line\">      Identify</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">data</span></span>() &#123;</span><br><span class=\"line\">      var checkPhone = (rule, value, callback) =&gt; &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!value) &#123;</span><br><span class=\"line\">          <span class=\"built_in\">return</span> callback(new Error(<span class=\"string\">'手机号不能为空'</span>));</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          const reg = /^1[3|4|5|7|8][0-9]\\d&#123;8&#125;$/</span><br><span class=\"line\">          console.log(reg.test(value));</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (reg.test(value)) &#123;</span><br><span class=\"line\">            callback();</span><br><span class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span> callback(new Error(<span class=\"string\">'手机号格式错误'</span>));</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">      const validateVerifycode = (rule, value, callback) =&gt; &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!value) &#123;</span><br><span class=\"line\">            callback(new Error(<span class=\"string\">'请输入验证码'</span>));</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (value != this.identifyCode) &#123;</span><br><span class=\"line\">            console.log(<span class=\"string\">'validateVerifycode:'</span>, value)</span><br><span class=\"line\">            this.ruleForm.validate = <span class=\"string\">''</span></span><br><span class=\"line\">            this.refreshCode()</span><br><span class=\"line\">            callback(new Error(<span class=\"string\">'验证码不正确!'</span>));</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            callback();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">      <span class=\"built_in\">return</span> &#123;</span><br><span class=\"line\">        // isDebugLogin: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        identifyCodes: <span class=\"string\">'123456789'</span>,</span><br><span class=\"line\">        identifyCode: <span class=\"string\">''</span>,</span><br><span class=\"line\">        ruleForm: &#123;</span><br><span class=\"line\">          pass: <span class=\"string\">''</span>,</span><br><span class=\"line\">          username: <span class=\"string\">''</span>,</span><br><span class=\"line\">          validate: <span class=\"string\">''</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        rules: &#123;</span><br><span class=\"line\">          username: [</span><br><span class=\"line\">            // &#123; required: <span class=\"literal\">true</span>, message: <span class=\"string\">'请输入用户名'</span>, trigger: <span class=\"string\">'blur'</span> &#125;,</span><br><span class=\"line\">            // &#123; min: 3, max: 8, message: <span class=\"string\">'长度为 3 到 8 个字符'</span>, trigger: <span class=\"string\">'blur'</span> &#125;</span><br><span class=\"line\">            &#123; validator: checkPhone, required: <span class=\"literal\">true</span>, trigger: <span class=\"string\">'blur'</span> &#125;</span><br><span class=\"line\">          ],</span><br><span class=\"line\">          pass: [</span><br><span class=\"line\">            &#123; required: <span class=\"literal\">true</span>, message: <span class=\"string\">'请输入密码'</span>, trigger: <span class=\"string\">'blur'</span> &#125;,</span><br><span class=\"line\">            &#123; min: 6, max: 17, message: <span class=\"string\">'长度为 6 到 17 个字符'</span>, trigger: <span class=\"string\">'change'</span> &#125;</span><br><span class=\"line\">          ],</span><br><span class=\"line\">          validate: [</span><br><span class=\"line\">            &#123; validator: validateVerifycode, required: <span class=\"literal\">true</span>, trigger: <span class=\"string\">'blur'</span> &#125;</span><br><span class=\"line\">          ]</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">mounted</span></span> () &#123;</span><br><span class=\"line\">      // 初始化验证码</span><br><span class=\"line\">      this.identifyCode = <span class=\"string\">''</span></span><br><span class=\"line\">      this.makeCode(this.identifyCodes, 4)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    methods: &#123;</span><br><span class=\"line\">      randomNum(min, max) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> Math.floor(Math.random() * (max - min) + min)</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"function\"><span class=\"title\">refreshCode</span></span>() &#123;</span><br><span class=\"line\">        this.identifyCode = <span class=\"string\">''</span></span><br><span class=\"line\">        this.makeCode(this.identifyCodes, 4)</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      makeCode(o, l) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"built_in\">let</span> i = 0; i &lt; l; i++) &#123;</span><br><span class=\"line\">          this.identifyCode += this.identifyCodes[</span><br><span class=\"line\">            this.randomNum(0, this.identifyCodes.length)</span><br><span class=\"line\">          ]</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      submitForm(formName) &#123;</span><br><span class=\"line\">        this.<span class=\"variable\">$refs</span>[formName].validate((valid) =&gt; &#123;</span><br><span class=\"line\">          console.log(valid)</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (valid) &#123;</span><br><span class=\"line\">            alert(<span class=\"string\">'submit!'</span>);</span><br><span class=\"line\">            // 发送请求给后台,请求数据成功之后</span><br><span class=\"line\">            this.<span class=\"variable\">$router</span>.push(<span class=\"string\">'/home'</span>)</span><br><span class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            console.log(<span class=\"string\">'error submit!!'</span>);</span><br><span class=\"line\">            <span class=\"built_in\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"function\"><span class=\"title\">created</span></span>() &#123;</span><br><span class=\"line\">        this.refreshCode()</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"function\"><span class=\"title\">registerClick</span></span>() &#123;</span><br><span class=\"line\">        this.<span class=\"variable\">$router</span>.push(<span class=\"string\">'/register'</span>);</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"function\"><span class=\"title\">Forgetpass</span></span>() &#123;</span><br><span class=\"line\">        this.<span class=\"variable\">$router</span>.push( <span class=\"string\">'/forget'</span> )</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<p>简书: <a href=\"https://www.jianshu.com/p/0801b2d51d64\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n","categories":["VUE"],"tags":["VUE"]},{"title":"CSS使用calc()函数","url":"/2020/07/14/calc/","content":"<blockquote>\n<p>要让小盒子占满大盒子剩下的部分，这时候可以设置小盒子高为 100% 或者是100vh减去大盒子的高度50px。只需设置样式使用calc() 函数，它支持 “+”, “-”, “*”, “/” 运算；</p>\n</blockquote>\n<h2 id=\"注意\"><a href=\"#注意\" class=\"headerlink\" title=\"注意:\"></a>注意:</h2><blockquote>\n<p>1.运算符前后都需要保留一个空格，例如：width: calc(100% - 10px)；<br>2.任何长度值都可以使用calc()函数进行计算；<br>3.calc()函数使用标准的数学运算优先级规则；<br>4.它支持 “+”, “-”, “*”, “/” 运算</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">小盒子 &#123;</span><br><span class=\"line\">   //height: calc(100vh - 50px);</span><br><span class=\"line\">  height: calc(100% - 50px);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>扩展： vh：相对于视口的高度, vw：相对于视口的宽度。视口被均分为100单位的vh</p>\n</blockquote>\n<p>简书: <a href=\"https://www.jianshu.com/p/58e8d785c54e\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n","categories":["CSS"],"tags":["CSS"]},{"title":"原生 js 实现导出功能","url":"/2020/07/14/export/","content":"<h4 id=\"对按钮添加点击事件-将下面的代码复制进点击事件里面\"><a href=\"#对按钮添加点击事件-将下面的代码复制进点击事件里面\" class=\"headerlink\" title=\"对按钮添加点击事件,将下面的代码复制进点击事件里面\"></a>对按钮添加点击事件,将下面的代码复制进点击事件里面</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">//要导出的json数据</span><br><span class=\"line\">var jsonData = this.tableData;</span><br><span class=\"line\">//列标题，逗号隔开，每一个逗号就是隔开一个单元格</span><br><span class=\"line\">var str = `姓名,性别,年龄,手机号,地址\\n`;</span><br><span class=\"line\">//增加\\t为了不让表格显示科学计数法或者其他格式</span><br><span class=\"line\"><span class=\"keyword\">for</span> (var i = 0; i &lt; jsonData.length; i++) &#123;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (var item <span class=\"keyword\">in</span> jsonData[i]) &#123;</span><br><span class=\"line\">  str += `<span class=\"variable\">$&#123;jsonData[i][item] + '\\t'&#125;</span>,`;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">str += <span class=\"string\">'\\n'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//encodeURIComponent解决中文乱码</span><br><span class=\"line\">var uri = <span class=\"string\">'data:text/csv;charset=utf-8,\\ufeff'</span> + encodeURIComponent(str);</span><br><span class=\"line\">//通过创建a标签实现</span><br><span class=\"line\">var link = document.createElement(<span class=\"string\">\"a\"</span>);</span><br><span class=\"line\">link.href = uri;</span><br><span class=\"line\">// 获取当前日期,根据需求决定是否保留</span><br><span class=\"line\"><span class=\"built_in\">let</span> d = new Date();</span><br><span class=\"line\"><span class=\"built_in\">let</span> y = d.getFullYear();</span><br><span class=\"line\"><span class=\"built_in\">let</span> m = d.getMonth();</span><br><span class=\"line\"><span class=\"built_in\">let</span> t = d.getDate();</span><br><span class=\"line\">//对下载的文件命名</span><br><span class=\"line\">link.download = `<span class=\"variable\">$&#123;y&#125;</span>-<span class=\"variable\">$&#123;m&#125;</span>-<span class=\"variable\">$&#123;t&#125;</span>日数据表.csv`;</span><br><span class=\"line\">document.body.appendChild(link);</span><br><span class=\"line\">link.click();</span><br><span class=\"line\">document.body.removeChild(link);</span><br></pre></td></tr></table></figure>\n","categories":["JS"],"tags":["JS / Export"]},{"title":"给Hexo添加一个鼠标点击爆炸的效果","url":"/2020/07/08/mouseAddExplosionEffect/","content":"<h3 id=\"1、在-themes-next-source-js-src-路径下新建-fireworks-js\"><a href=\"#1、在-themes-next-source-js-src-路径下新建-fireworks-js\" class=\"headerlink\" title=\"1、在 themes/next/source/js/src 路径下新建 fireworks.js\"></a>1、在 themes/next/source/js/src 路径下新建 fireworks.js</h3><h5 id=\"fireworks-js代码\"><a href=\"#fireworks-js代码\" class=\"headerlink\" title=\"fireworks.js代码\"></a>fireworks.js代码</h5><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">\"use strict\"</span>;<span class=\"keyword\">function</span> updateCoords(e)&#123;pointerX=(e.clientX||e.touches[0].clientX)-canvasEl.getBoundingClientRect().left,pointerY=e.clientY||e.touches[0].clientY-canvasEl.getBoundingClientRect().top&#125;<span class=\"keyword\">function</span> setParticuleDirection(e)&#123;var t=anime.random(0,360)*Math.PI/180,a=anime.random(50,180),n=[-1,1][anime.random(0,1)]*a;<span class=\"built_in\">return</span>&#123;x:e.x+n*Math.cos(t),y:e.y+n*Math.sin(t)&#125;&#125;<span class=\"keyword\">function</span> createParticule(e,t)&#123;var a=&#123;&#125;;<span class=\"built_in\">return</span> a.x=e,a.y=t,a.color=colors[anime.random(0,colors.length-1)],a.radius=anime.random(16,32),a.endPos=setParticuleDirection(a),a.draw=<span class=\"function\"><span class=\"title\">function</span></span>()&#123;ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0),ctx.fillStyle=a.color,ctx.fill()&#125;,a&#125;<span class=\"keyword\">function</span> createCircle(e,t)&#123;var a=&#123;&#125;;<span class=\"built_in\">return</span> a.x=e,a.y=t,a.color=<span class=\"string\">\"#F00\"</span>,a.radius=0.1,a.alpha=0.5,a.lineWidth=6,a.draw=<span class=\"function\"><span class=\"title\">function</span></span>()&#123;ctx.globalAlpha=a.alpha,ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0),ctx.lineWidth=a.lineWidth,ctx.strokeStyle=a.color,ctx.stroke(),ctx.globalAlpha=1&#125;,a&#125;<span class=\"keyword\">function</span> renderParticule(e)&#123;<span class=\"keyword\">for</span>(var t=0;t&lt;e.animatables.length;t++)&#123;e.animatables[t].target.draw()&#125;&#125;<span class=\"keyword\">function</span> animateParticules(e,t)&#123;<span class=\"keyword\">for</span>(var a=createCircle(e,t),n=[],i=0;i&lt;numberOfParticules;i++)&#123;n.push(createParticule(e,t))&#125;anime.timeline().add(&#123;targets:n,x:<span class=\"keyword\">function</span>(e)&#123;<span class=\"built_in\">return</span> e.endPos.x&#125;,y:<span class=\"keyword\">function</span>(e)&#123;<span class=\"built_in\">return</span> e.endPos.y&#125;,radius:0.1,duration:anime.random(1200,1800),easing:<span class=\"string\">\"easeOutExpo\"</span>,update:renderParticule&#125;).add(&#123;targets:a,radius:anime.random(80,160),lineWidth:0,alpha:&#123;value:0,easing:<span class=\"string\">\"linear\"</span>,duration:anime.random(600,800)&#125;,duration:anime.random(1200,1800),easing:<span class=\"string\">\"easeOutExpo\"</span>,update:renderParticule,offset:0&#125;)&#125;<span class=\"keyword\">function</span> debounce(e,t)&#123;var a;<span class=\"built_in\">return</span> <span class=\"function\"><span class=\"title\">function</span></span>()&#123;var n=this,i=arguments;clearTimeout(a),a=setTimeout(<span class=\"function\"><span class=\"title\">function</span></span>()&#123;e.apply(n,i)&#125;,t)&#125;&#125;var canvasEl=document.querySelector(<span class=\"string\">\".fireworks\"</span>);<span class=\"keyword\">if</span>(canvasEl)&#123;var ctx=canvasEl.getContext(<span class=\"string\">\"2d\"</span>),numberOfParticules=30,pointerX=0,pointerY=0,tap=<span class=\"string\">\"mousedown\"</span>,colors=[<span class=\"string\">\"#FF1461\"</span>,<span class=\"string\">\"#18FF92\"</span>,<span class=\"string\">\"#5A87FF\"</span>,<span class=\"string\">\"#FBF38C\"</span>],setCanvasSize=debounce(<span class=\"function\"><span class=\"title\">function</span></span>()&#123;canvasEl.width=2*window.innerWidth,canvasEl.height=2*window.innerHeight,canvasEl.style.width=window.innerWidth+<span class=\"string\">\"px\"</span>,canvasEl.style.height=window.innerHeight+<span class=\"string\">\"px\"</span>,canvasEl.getContext(<span class=\"string\">\"2d\"</span>).scale(2,2)&#125;,500),render=anime(&#123;duration:1/0,update:<span class=\"function\"><span class=\"title\">function</span></span>()&#123;ctx.clearRect(0,0,canvasEl.width,canvasEl.height)&#125;&#125;);document.addEventListener(tap,<span class=\"keyword\">function</span>(e)&#123;<span class=\"string\">\"sidebar\"</span>!==e.target.id&amp;&amp;<span class=\"string\">\"toggle-sidebar\"</span>!==e.target.id&amp;&amp;<span class=\"string\">\"A\"</span>!==e.target.nodeName&amp;&amp;<span class=\"string\">\"IMG\"</span>!==e.target.nodeName&amp;&amp;(render.play(),updateCoords(e),animateParticules(pointerX,pointerY))&#125;,!1),setCanvasSize(),window.addEventListener(<span class=\"string\">\"resize\"</span>,setCanvasSize,!1)&#125;<span class=\"string\">\"use strict\"</span>;<span class=\"keyword\">function</span> updateCoords(e)&#123;pointerX=(e.clientX||e.touches[0].clientX)-canvasEl.getBoundingClientRect().left,pointerY=e.clientY||e.touches[0].clientY-canvasEl.getBoundingClientRect().top&#125;<span class=\"keyword\">function</span> setParticuleDirection(e)&#123;var t=anime.random(0,360)*Math.PI/180,a=anime.random(50,180),n=[-1,1][anime.random(0,1)]*a;<span class=\"built_in\">return</span>&#123;x:e.x+n*Math.cos(t),y:e.y+n*Math.sin(t)&#125;&#125;<span class=\"keyword\">function</span> createParticule(e,t)&#123;var a=&#123;&#125;;<span class=\"built_in\">return</span> a.x=e,a.y=t,a.color=colors[anime.random(0,colors.length-1)],a.radius=anime.random(16,32),a.endPos=setParticuleDirection(a),a.draw=<span class=\"function\"><span class=\"title\">function</span></span>()&#123;ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0),ctx.fillStyle=a.color,ctx.fill()&#125;,a&#125;<span class=\"keyword\">function</span> createCircle(e,t)&#123;var a=&#123;&#125;;<span class=\"built_in\">return</span> a.x=e,a.y=t,a.color=<span class=\"string\">\"#F00\"</span>,a.radius=0.1,a.alpha=0.5,a.lineWidth=6,a.draw=<span class=\"function\"><span class=\"title\">function</span></span>()&#123;ctx.globalAlpha=a.alpha,ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0),ctx.lineWidth=a.lineWidth,ctx.strokeStyle=a.color,ctx.stroke(),ctx.globalAlpha=1&#125;,a&#125;<span class=\"keyword\">function</span> renderParticule(e)&#123;<span class=\"keyword\">for</span>(var t=0;t&lt;e.animatables.length;t++)&#123;e.animatables[t].target.draw()&#125;&#125;<span class=\"keyword\">function</span> animateParticules(e,t)&#123;<span class=\"keyword\">for</span>(var a=createCircle(e,t),n=[],i=0;i&lt;numberOfParticules;i++)&#123;n.push(createParticule(e,t))&#125;anime.timeline().add(&#123;targets:n,x:<span class=\"keyword\">function</span>(e)&#123;<span class=\"built_in\">return</span> e.endPos.x&#125;,y:<span class=\"keyword\">function</span>(e)&#123;<span class=\"built_in\">return</span> e.endPos.y&#125;,radius:0.1,duration:anime.random(1200,1800),easing:<span class=\"string\">\"easeOutExpo\"</span>,update:renderParticule&#125;).add(&#123;targets:a,radius:anime.random(80,160),lineWidth:0,alpha:&#123;value:0,easing:<span class=\"string\">\"linear\"</span>,duration:anime.random(600,800)&#125;,duration:anime.random(1200,1800),easing:<span class=\"string\">\"easeOutExpo\"</span>,update:renderParticule,offset:0&#125;)&#125;<span class=\"keyword\">function</span> debounce(e,t)&#123;var a;<span class=\"built_in\">return</span> <span class=\"function\"><span class=\"title\">function</span></span>()&#123;var n=this,i=arguments;clearTimeout(a),a=setTimeout(<span class=\"function\"><span class=\"title\">function</span></span>()&#123;e.apply(n,i)&#125;,t)&#125;&#125;var canvasEl=document.querySelector(<span class=\"string\">\".fireworks\"</span>);<span class=\"keyword\">if</span>(canvasEl)&#123;var ctx=canvasEl.getContext(<span class=\"string\">\"2d\"</span>),numberOfParticules=30,pointerX=0,pointerY=0,tap=<span class=\"string\">\"mousedown\"</span>,colors=[<span class=\"string\">\"#FF1461\"</span>,<span class=\"string\">\"#18FF92\"</span>,<span class=\"string\">\"#5A87FF\"</span>,<span class=\"string\">\"#FBF38C\"</span>],setCanvasSize=debounce(<span class=\"function\"><span class=\"title\">function</span></span>()&#123;canvasEl.width=2*window.innerWidth,canvasEl.height=2*window.innerHeight,canvasEl.style.width=window.innerWidth+<span class=\"string\">\"px\"</span>,canvasEl.style.height=window.innerHeight+<span class=\"string\">\"px\"</span>,canvasEl.getContext(<span class=\"string\">\"2d\"</span>).scale(2,2)&#125;,500),render=anime(&#123;duration:1/0,update:<span class=\"function\"><span class=\"title\">function</span></span>()&#123;ctx.clearRect(0,0,canvasEl.width,canvasEl.height)&#125;&#125;);document.addEventListener(tap,<span class=\"keyword\">function</span>(e)&#123;<span class=\"string\">\"sidebar\"</span>!==e.target.id&amp;&amp;<span class=\"string\">\"toggle-sidebar\"</span>!==e.target.id&amp;&amp;<span class=\"string\">\"A\"</span>!==e.target.nodeName&amp;&amp;<span class=\"string\">\"IMG\"</span>!==e.target.nodeName&amp;&amp;(render.play(),updateCoords(e),animateParticules(pointerX,pointerY))&#125;,!1),setCanvasSize(),window.addEventListener(<span class=\"string\">\"resize\"</span>,setCanvasSize,!1)&#125;;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2、然后在themes-next-layout-layout-swig-body里面（添加在最前面）添加下面代码\"><a href=\"#2、然后在themes-next-layout-layout-swig-body里面（添加在最前面）添加下面代码\" class=\"headerlink\" title=\"2、然后在themes/next/layout/_layout.swig body里面（添加在最前面）添加下面代码\"></a>2、然后在themes/next/layout/_layout.swig body里面（添加在最前面）添加下面代码</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;% <span class=\"keyword\">if</span> theme.fireworks %&#125;</span><br><span class=\"line\">&lt;canvas class=<span class=\"string\">\"fireworks\"</span> style=<span class=\"string\">\"position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;\"</span> &gt;&lt;/canvas&gt; </span><br><span class=\"line\">&lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"//cdn.bootcss.com/animejs/2.2.0/anime.min.js\"</span>&gt;&lt;/script&gt; </span><br><span class=\"line\">&lt;script <span class=\"built_in\">type</span>=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"/js/src/fireworks.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3、最后在主题配置文件中配置\"><a href=\"#3、最后在主题配置文件中配置\" class=\"headerlink\" title=\"3、最后在主题配置文件中配置\"></a>3、最后在主题配置文件中配置</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">fireworks: <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4、效果图\"><a href=\"#4、效果图\" class=\"headerlink\" title=\"4、效果图\"></a>4、效果图</h3><p><img src=\"/img/eg.png\" alt=\"aaa\"></p>\n<p>链接: <a href=\"http://rayboo.netlify.com/2018/10/29/hexo-next-%E4%B8%BB%E9%A2%98%E8%AE%BE%E7%BD%AE%E9%BC%A0%E6%A0%87%E7%82%B9%E5%87%BB%E5%8A%A8%E7%94%BB/\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n","categories":["HEXO"],"tags":["Hexo"]},{"title":"html2canvas截图","url":"/2020/07/09/html2canvas/","content":"<h2 id=\"原生js方法\"><a href=\"#原生js方法\" class=\"headerlink\" title=\"原生js方法\"></a>原生js方法</h2><blockquote>\n<p>引入html2canvas</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">http://html2canvas.hertzen.com/dist/html2canvas.min.js</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>html代码部分</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!doctype html&gt;</span><br><span class=\"line\">&lt;html lang=<span class=\"string\">\"en\"</span>&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=<span class=\"string\">\"UTF-8\"</span>&gt;</span><br><span class=\"line\">    &lt;title&gt;html2canvas&lt;/title&gt;</span><br><span class=\"line\">    &lt;script src=<span class=\"string\">\"http://html2canvas.hertzen.com/dist/html2canvas.min.js\"</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;style&gt;</span><br><span class=\"line\">        *&#123;</span><br><span class=\"line\">            margin: 0;</span><br><span class=\"line\">            padding: 0;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">#htmlcanvas&#123;</span></span><br><span class=\"line\">            padding: 10px;</span><br><span class=\"line\">            background: red;</span><br><span class=\"line\">            height: 300px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">#ddd&#123;</span></span><br><span class=\"line\">            width: 100px;</span><br><span class=\"line\">            height: 100px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &lt;/style&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;h1&gt;html内容&lt;/h1&gt;</span><br><span class=\"line\">    &lt;div id=<span class=\"string\">\"htmlcanvas\"</span>&gt;</span><br><span class=\"line\">        &lt;h2 style=<span class=\"string\">\"text-align:center;\"</span>&gt;那一瞬间有一百万可能&lt;/h2&gt;</span><br><span class=\"line\">        &lt;img id=<span class=\"string\">\"ddd\"</span> src=<span class=\"string\">\"https://qiniuimage.shengyaapp.com//H5/image/SQJZ/admin/listBtn.png\"</span> crossOrigin=<span class=\"string\">\"*\"</span> alt=<span class=\"string\">\"\"</span>&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">    &lt;h1&gt;canvas内容&lt;/h1&gt;</span><br><span class=\"line\">    &lt;div id=<span class=\"string\">\"canid\"</span>&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">    &lt;button id=<span class=\"string\">\"btn\"</span>&gt;保存&lt;/button&gt;</span><br><span class=\"line\">    &lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>JS部分</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">        var img = <span class=\"string\">\"https://qiniuimage.shengyaapp.com//H5/image/SQJZ/admin/listBtn.png\"</span>;//imgurl 就是你的图片路径  </span><br><span class=\"line\">        <span class=\"keyword\">function</span> getBase64(imgUrl) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span> new Promise((resolve) =&gt; &#123;</span><br><span class=\"line\">                setTimeout(() =&gt; &#123;</span><br><span class=\"line\">                    window.URL = window.URL || window.webkitURL;</span><br><span class=\"line\">                    var xhr = new XMLHttpRequest();</span><br><span class=\"line\">                    xhr.open(<span class=\"string\">\"get\"</span>, imgUrl, <span class=\"literal\">true</span>);</span><br><span class=\"line\">                    // 至关重要</span><br><span class=\"line\">                    xhr.responseType = <span class=\"string\">\"blob\"</span>;</span><br><span class=\"line\">                    xhr.onload = <span class=\"function\"><span class=\"title\">function</span></span> () &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (this.status == 200) &#123;</span><br><span class=\"line\">                            //得到一个blob对象</span><br><span class=\"line\">                            var blob = this.response;</span><br><span class=\"line\">                            console.log(<span class=\"string\">\"blob\"</span>, blob)</span><br><span class=\"line\">                            //  至关重要</span><br><span class=\"line\">                            <span class=\"built_in\">let</span> oFileReader = new FileReader();</span><br><span class=\"line\">                            oFileReader.onloadend = <span class=\"keyword\">function</span> (e) &#123;</span><br><span class=\"line\">                                <span class=\"built_in\">let</span> base64 = e.target.result;</span><br><span class=\"line\">                                document.getElementById(<span class=\"string\">\"ddd\"</span>).src = base64</span><br><span class=\"line\">                                html2canvas(document.querySelector(<span class=\"string\">\"#htmlcanvas\"</span>)).<span class=\"keyword\">then</span>(canvas =&gt; &#123;</span><br><span class=\"line\">                                    document.getElementById(<span class=\"string\">\"canid\"</span>).appendChild(canvas);</span><br><span class=\"line\">                                    canvas.style.display = <span class=\"string\">'none'</span>;</span><br><span class=\"line\">                                &#125;);</span><br><span class=\"line\">                                console.log(document.getElementById(<span class=\"string\">\"ddd\"</span>).src)</span><br><span class=\"line\">                            &#125;;</span><br><span class=\"line\">                            oFileReader.readAsDataURL(blob);</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    xhr.send();</span><br><span class=\"line\">                    resolve()</span><br><span class=\"line\">                &#125;, 100);</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        document.getElementById(<span class=\"string\">\"btn\"</span>).onclick = <span class=\"function\"><span class=\"title\">function</span></span>()&#123;</span><br><span class=\"line\">            getBase64(img).<span class=\"keyword\">then</span>(<span class=\"function\"><span class=\"title\">function</span></span>()&#123;</span><br><span class=\"line\">               <span class=\"built_in\">return</span> xiazai()</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">function</span> <span class=\"function\"><span class=\"title\">xiazai</span></span>()&#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span> new Promise((resolve) =&gt; &#123;</span><br><span class=\"line\">                setTimeout(() =&gt; &#123;</span><br><span class=\"line\">                    var strDataURI11;</span><br><span class=\"line\">                    var canv = document.getElementsByTagName(<span class=\"string\">\"canvas\"</span>)[0]</span><br><span class=\"line\">                    canv.crossOrigin = <span class=\"string\">\"anonymous\"</span></span><br><span class=\"line\">                    var strDataURI = canv.toDataURL();</span><br><span class=\"line\">                    strDataURI11 = strDataURI</span><br><span class=\"line\">                    var blob=new Blob([<span class=\"string\">''</span>], &#123;<span class=\"built_in\">type</span>:<span class=\"string\">'application/octet-stream'</span>&#125;);</span><br><span class=\"line\">                    var url = URL.createObjectURL(blob);</span><br><span class=\"line\">                    var a = document.createElement(<span class=\"string\">'a'</span>);</span><br><span class=\"line\">                    a.href = strDataURI11;</span><br><span class=\"line\">                    a.download = strDataURI11.replace(/(.*\\/)*([^.]+.*)/ig,<span class=\"string\">\"<span class=\"variable\">$2</span>\"</span>).split(<span class=\"string\">\"?\"</span>)[0];</span><br><span class=\"line\">                    var e = document.createEvent(<span class=\"string\">'MouseEvents'</span>);</span><br><span class=\"line\">                    e.initMouseEvent(<span class=\"string\">'click'</span>, <span class=\"literal\">true</span>, <span class=\"literal\">false</span>, window, 0, 0, 0, 0, 0, <span class=\"literal\">false</span>, <span class=\"literal\">false</span>, <span class=\"literal\">false</span>, <span class=\"literal\">false</span>, 0, null);</span><br><span class=\"line\">                    a.dispatchEvent(e);</span><br><span class=\"line\">                    URL.revokeObjectURL(url);</span><br><span class=\"line\">                    document.getElementById(<span class=\"string\">\"canid\"</span>).innerHTML = <span class=\"string\">''</span></span><br><span class=\"line\">                    resolve()</span><br><span class=\"line\">                &#125;,200);</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &lt;/script&gt;</span><br></pre></td></tr></table></figure>\n","categories":["Canvas"],"tags":["JS / CANVAS"]}]