<!DOCTYPE html>
<!--[if lte IE 8 ]>
<html class="ie" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN">
<!--<![endif]-->

<head>
  <title>Vue 验证码插件及使用方法 | _冬暖_</title>
  <!-- Meta data -->
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="_冬暖_">
    <meta name="author" content="LingegeA">
    <meta name="description" content="" />
    <meta name="keywords" content="" />

    <!-- Favicon, (keep icon in root folder) -->
    <link rel="Shortcut Icon" href="/img/faviconc.ico" type="image/ico">

    <link rel="alternate" href="/atom.xml" title="_冬暖_" type="application/atom+xml">
    <link rel="stylesheet" href="/css/all.css" media="screen" type="text/css">
    
    <link rel="stylesheet" href="/highlightjs/vs.css" type="text/css">
    

    <!--[if IE 8]>
    <link rel="stylesheet" type="text/css" href="/css/ie8.css" />
    <![endif]-->

    <!-- jQuery | Load our jQuery, with an alternative source fallback to a local version if request is unavailable -->
    <script src="/js/jquery-1.11.1.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/jquery-1.11.1.min.js"><\/script>')</script>

    <!-- Load these in the <head> for quicker IE8+ load times -->
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="/js/html5shiv.min.js"></script>
    <script src="/js/respond.min.js"></script>
    <![endif]-->

  
  
  

  <style>.col-md-8.col-md-offset-2.opening-statement img{display:none;}</style>
</head>

<!--
<body class="post-template">
-->
<body id="index" class="lightnav animsition">
      
      <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 999; pointer-events: none;" ></canvas> 
      <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> 
      <script type="text/javascript" src="/js/fireworks.js"></script>
      
      <!-- ============================ Off-canvas navigation =========================== -->

    <div class="sb-slidebar sb-right sb-style-overlay sb-momentum-scrolling">
        <div class="sb-close" aria-label="Close Menu" aria-hidden="true">
            <img src="/img/close.png" alt="Close"/>
        </div>
        <!-- Lists in Slidebars -->
        <ul class="sb-menu">
            <li><a href="/" class="animsition-link" title="Home">Home</a></li>
            <li><a href="/archives" class="animsition-link" title="archive">archives</a></li>
            <!-- Dropdown Menu -->
			 
            <li>
                <a class="sb-toggle-submenu">Works<span class="sb-caret"></span></a>
                <ul class="sb-submenu">
                    
                        <li><a href="/" target="_BLANK" class="animsition-link">AAA</a></li>
                    
                        <li><a href="/atom.xml" target="_BLANK" class="animsition-link">BBB</a></li>
                    
                </ul>
            </li>
            
            
            
            <li>
                <a class="sb-toggle-submenu">Links<span class="sb-caret"></span></a>
                <ul class="sb-submenu">
                    
                    <li><a href="http://go.kieran.top/" target="_blank" rel="noopener" class="animsition-link">Kieran</a></li>
                    
                    <li><a href="http://domain.com/" target="_blank" rel="noopener" class="animsition-link">Name</a></li>
                    
                </ul>
            </li>
            
        </ul>
        <!-- Lists in Slidebars -->
        <ul class="sb-menu secondary">
            
            <li><a href="/about.html" class="animsition-link" title="about">About</a></li>
            <li><a href="/atom.xml" class="animsition-link" title="rss">RSS</a></li>
        </ul>
    </div>
    
    <!-- ============================ END Off-canvas navigation =========================== -->

    <!-- ============================ #sb-site Main Page Wrapper =========================== -->

    <div id="sb-site">
        <!-- #sb-site - All page content should be contained within this id, except the off-canvas navigation itself -->

        <!-- ============================ Header & Logo bar =========================== -->

        <div id="navigation" class="navbar navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <!-- Nav logo -->
                    <div class="logo">
                        <a href="/" title="Logo" class="animsition-link">
                         <img src="/img/logo.png" alt="Logo" width="35px;"/> 
                        </a>
                    </div>
                    <!-- // Nav logo -->
                    <!-- Info-bar -->
                    <nav>
                        <ul class="nav">
                            <li><a href="/" class="animsition-link">_冬暖_</a></li>
                            <li class="nolink"><span>Development </span>Diary.</li>
                            
                            <li><a href="https://github.com/" title="Github" target="_blank"><i class="icon-github"></i></a></li>
                            
                            
                            <li><a href="https://twitter.com/" title="Twitter" target="_blank"><i class="icon-twitter"></i></a></li>
                            
                            
                            <li><a href="https://www.facebook.com/" title="Facebook" target="_blank"><i class="icon-facebook"></i></a></li>
                            
                            
                            <li><a href="https://google.com/" title="Google-Plus" target="_blank"><i class="icon-google-plus"></i></a></li>
                            
                            
                            <li><a href="http://weibo.com/" title="Sina-Weibo" target="_blank"><i class="icon-sina-weibo"></i></a></li>
                            
                            <li class="nolink"><span>Welcome!</span></li>
                        </ul>
                    </nav>
                    <!--// Info-bar -->
                </div>
                <!-- // .container -->
                <div class="learnmore sb-toggle-right">More</div>
                <button type="button" class="navbar-toggle menu-icon sb-toggle-right" title="More">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar before"></span>
                <span class="icon-bar main"></span>
                <span class="icon-bar after"></span>
                </button>
            </div>
            <!-- // .navbar-inner -->
        </div>

        <!-- ============================ Header & Logo bar =========================== -->


      
<section id="intro">
    <div class="container">
        <div class="row col-md-offset-2">
            <div class="col-md-8">
    			<span class="post-meta">
      <time datetime="2020-07-08T03:01:29.000Z" itemprop="datePublished">
          2020-07-08
      </time>
    
</span>
                <h1>Vue 验证码插件及使用方法</h1>
                <p style="border-bottom: 2px solid #3bafda;"></p>
            </div>
        </div>
        <div class="col-md-8 col-md-offset-2">
      		<p>简书: <a href="https://www.jianshu.com/p/0801b2d51d64" target="_blank" rel="noopener">Server</a></p>
<h2 id="新建验证码组件-SIdentity"><a href="#新建验证码组件-SIdentity" class="headerlink" title="新建验证码组件 SIdentity"></a>新建验证码组件 SIdentity</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=<span class="string">"s-canvas"</span>&gt;</span><br><span class="line">        &lt;canvas id=<span class="string">"s-canvas"</span> :width=<span class="string">"contentWidth"</span> :height=<span class="string">"contentHeight"</span>&gt;&lt;/canvas&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="built_in">export</span> default &#123;</span><br><span class="line">        name: <span class="string">'SIdentify'</span>,</span><br><span class="line">        props: &#123;</span><br><span class="line">            identifyCode: &#123;</span><br><span class="line">                <span class="built_in">type</span>: String,</span><br><span class="line">                default: <span class="string">'1234'</span></span><br><span class="line">            &#125;,</span><br><span class="line">            fontSizeMin: &#123;</span><br><span class="line">                <span class="built_in">type</span>: Number,</span><br><span class="line">                default: 16</span><br><span class="line">            &#125;,</span><br><span class="line">            fontSizeMax: &#123;</span><br><span class="line">                <span class="built_in">type</span>: Number,</span><br><span class="line">                default: 40</span><br><span class="line">            &#125;,</span><br><span class="line">            backgroundColorMin: &#123;</span><br><span class="line">                <span class="built_in">type</span>: Number,</span><br><span class="line">                default: 180</span><br><span class="line">            &#125;,</span><br><span class="line">            backgroundColorMax: &#123;</span><br><span class="line">                <span class="built_in">type</span>: Number,</span><br><span class="line">                default: 240</span><br><span class="line">            &#125;,</span><br><span class="line">            colorMin: &#123;</span><br><span class="line">                <span class="built_in">type</span>: Number,</span><br><span class="line">                default: 50</span><br><span class="line">            &#125;,</span><br><span class="line">            colorMax: &#123;</span><br><span class="line">                <span class="built_in">type</span>: Number,</span><br><span class="line">                default: 160</span><br><span class="line">            &#125;,</span><br><span class="line">            lineColorMin: &#123;</span><br><span class="line">                <span class="built_in">type</span>: Number,</span><br><span class="line">                default: 40</span><br><span class="line">            &#125;,</span><br><span class="line">            lineColorMax: &#123;</span><br><span class="line">                <span class="built_in">type</span>: Number,</span><br><span class="line">                default: 180</span><br><span class="line">            &#125;,</span><br><span class="line">            dotColorMin: &#123;</span><br><span class="line">                <span class="built_in">type</span>: Number,</span><br><span class="line">                default: 0</span><br><span class="line">            &#125;,</span><br><span class="line">            dotColorMax: &#123;</span><br><span class="line">                <span class="built_in">type</span>: Number,</span><br><span class="line">                default: 255</span><br><span class="line">            &#125;,</span><br><span class="line">            contentWidth: &#123;</span><br><span class="line">                <span class="built_in">type</span>: Number,</span><br><span class="line">                default: 112</span><br><span class="line">            &#125;,</span><br><span class="line">            contentHeight: &#123;</span><br><span class="line">                <span class="built_in">type</span>: Number,</span><br><span class="line">                default: 38</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            // 生成一个随机数</span><br><span class="line">            randomNum(min, max) &#123;</span><br><span class="line">                <span class="built_in">return</span> Math.floor(Math.random() * (max - min) + min)</span><br><span class="line">            &#125;,</span><br><span class="line">            // 生成一个随机的颜色</span><br><span class="line">            randomColor(min, max) &#123;</span><br><span class="line">                <span class="built_in">let</span> r = this.randomNum(min, max)</span><br><span class="line">                <span class="built_in">let</span> g = this.randomNum(min, max)</span><br><span class="line">                <span class="built_in">let</span> b = this.randomNum(min, max)</span><br><span class="line">                <span class="built_in">return</span> <span class="string">'rgb('</span> + r + <span class="string">','</span> + g + <span class="string">','</span> + b + <span class="string">')'</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="function"><span class="title">drawPic</span></span>() &#123;</span><br><span class="line">                <span class="built_in">let</span> canvas = document.getElementById(<span class="string">'s-canvas'</span>)</span><br><span class="line">                <span class="built_in">let</span> ctx = canvas.getContext(<span class="string">'2d'</span>)</span><br><span class="line">                ctx.textBaseline = <span class="string">'bottom'</span></span><br><span class="line">                // 绘制背景</span><br><span class="line">                ctx.fillStyle = this.randomColor(this.backgroundColorMin, this.backgroundColorMax)</span><br><span class="line">                ctx.fillRect(0, 0, this.contentWidth, this.contentHeight)</span><br><span class="line">                // 绘制文字</span><br><span class="line">                <span class="keyword">for</span> (<span class="built_in">let</span> i = 0; i &lt; this.identifyCode.length; i++) &#123;</span><br><span class="line">                    this.drawText(ctx, this.identifyCode[i], i)</span><br><span class="line">                &#125;</span><br><span class="line">                this.drawLine(ctx)</span><br><span class="line">                this.drawDot(ctx)</span><br><span class="line">            &#125;,</span><br><span class="line">            drawText(ctx, txt, i) &#123;</span><br><span class="line">                ctx.fillStyle = this.randomColor(this.colorMin, this.colorMax)</span><br><span class="line">                ctx.font = this.randomNum(this.fontSizeMin, this.fontSizeMax) + <span class="string">'px SimHei'</span></span><br><span class="line">                <span class="built_in">let</span> x = (i + 1) * (this.contentWidth / (this.identifyCode.length + 1))</span><br><span class="line">                <span class="built_in">let</span> y = this.randomNum(this.fontSizeMax, this.contentHeight - 5)</span><br><span class="line">                var deg = this.randomNum(-45, 45)</span><br><span class="line">                // 修改坐标原点和旋转角度</span><br><span class="line">                ctx.translate(x, y)</span><br><span class="line">                ctx.rotate(deg * Math.PI / 180)</span><br><span class="line">                ctx.fillText(txt, 0, 0)</span><br><span class="line">                // 恢复坐标原点和旋转角度</span><br><span class="line">                ctx.rotate(-deg * Math.PI / 180)</span><br><span class="line">                ctx.translate(-x, -y)</span><br><span class="line">            &#125;,</span><br><span class="line">            drawLine(ctx) &#123;</span><br><span class="line">                // 绘制干扰线</span><br><span class="line">                <span class="keyword">for</span> (<span class="built_in">let</span> i = 0; i &lt; 8; i++) &#123;</span><br><span class="line">                    ctx.strokeStyle = this.randomColor(this.lineColorMin, this.lineColorMax)</span><br><span class="line">                    ctx.beginPath()</span><br><span class="line">                    ctx.moveTo(this.randomNum(0, this.contentWidth), this.randomNum(0, this.contentHeight))</span><br><span class="line">                    ctx.lineTo(this.randomNum(0, this.contentWidth), this.randomNum(0, this.contentHeight))</span><br><span class="line">                    ctx.stroke()</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            drawDot(ctx) &#123;</span><br><span class="line">                // 绘制干扰点</span><br><span class="line">                <span class="keyword">for</span> (<span class="built_in">let</span> i = 0; i &lt; 100; i++) &#123;</span><br><span class="line">                    ctx.fillStyle = this.randomColor(0, 255)</span><br><span class="line">                    ctx.beginPath()</span><br><span class="line">                    ctx.arc(this.randomNum(0, this.contentWidth), this.randomNum(0, this.contentHeight), 1, 0, 2 * Math.PI)</span><br><span class="line">                    ctx.fill()</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        watch: &#123;</span><br><span class="line">            <span class="function"><span class="title">identifyCode</span></span>() &#123;</span><br><span class="line">                this.drawPic()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="title">mounted</span></span>() &#123;</span><br><span class="line">            this.drawPic()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">    .s-canvas &#123;</span><br><span class="line">        height: 38px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    canvas &#123;</span><br><span class="line">        margin-top: 1px;</span><br><span class="line">        margin-left: 8px;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="在所需界面中引入组件"><a href="#在所需界面中引入组件" class="headerlink" title="在所需界面中引入组件"></a>在所需界面中引入组件</h2><blockquote>
<p>HTML 代码如下</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">   &lt;div class=<span class="string">"aric-main"</span>&gt;</span><br><span class="line">    &lt;img src=<span class="string">"../assets/thbg.png"</span>&gt;</span><br><span class="line">    &lt;el-form :model=<span class="string">"ruleForm"</span> status-icon :rules=<span class="string">"rules"</span> ref=<span class="string">"ruleForm"</span> label-width=<span class="string">"100px"</span> class=<span class="string">"demo-ruleForm aric-login-form"</span>&gt;</span><br><span class="line">      &lt;el-form-item label=<span class="string">"用户名"</span> prop=<span class="string">"username"</span>&gt;</span><br><span class="line">        &lt;el-input placeholder=<span class="string">"请输入手机号"</span> v-model.number=<span class="string">"ruleForm.username"</span> clearable&gt;&lt;/el-input&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label=<span class="string">"密码"</span> prop=<span class="string">"pass"</span>&gt;</span><br><span class="line">        &lt;el-input placeholder=<span class="string">"请输入密码"</span> <span class="built_in">type</span>=<span class="string">"password"</span> v-model=<span class="string">"ruleForm.pass"</span> show-password clearable&gt;&lt;/el-input&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label=<span class="string">"验证码"</span> prop=<span class="string">"validate"</span>&gt;</span><br><span class="line">        &lt;el-input class=<span class="string">"aric-yanzheng"</span> placeholder=<span class="string">"请输入验证码"</span> <span class="built_in">type</span>=<span class="string">"text"</span> v-model=<span class="string">"ruleForm.validate"</span>&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;div class=<span class="string">"login-code"</span> @click=<span class="string">"refreshCode"</span>&gt;</span><br><span class="line">          &lt;Identify :identifyCode=<span class="string">"identifyCode"</span>&gt;&lt;/Identify&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item&gt;</span><br><span class="line">        &lt;el-button <span class="built_in">type</span>=<span class="string">"primary"</span> @click=<span class="string">"submitForm('ruleForm')"</span>&gt;提交&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button @click=<span class="string">"registerClick"</span>&gt;注册&lt;/el-button&gt;</span><br><span class="line">        &lt;span class=<span class="string">"aric-foget-btn"</span> @click=<span class="string">"Forgetpass"</span>&gt;?忘记密码&lt;/span&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>JS代码如下 </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  import Identify from <span class="string">'../components/SIdentity.vue'</span>;</span><br><span class="line">  <span class="built_in">export</span> default &#123;</span><br><span class="line">    name: <span class="string">'login'</span>,</span><br><span class="line">    template: &#123;</span><br><span class="line">    &#125;,</span><br><span class="line">    components: &#123;</span><br><span class="line">      Identify</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">data</span></span>() &#123;</span><br><span class="line">      var checkPhone = (rule, value, callback) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (!value) &#123;</span><br><span class="line">          <span class="built_in">return</span> callback(new Error(<span class="string">'手机号不能为空'</span>));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          const reg = /^1[3|4|5|7|8][0-9]\d&#123;8&#125;$/</span><br><span class="line">          console.log(reg.test(value));</span><br><span class="line">          <span class="keyword">if</span> (reg.test(value)) &#123;</span><br><span class="line">            callback();</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">return</span> callback(new Error(<span class="string">'手机号格式错误'</span>));</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;;</span><br><span class="line">      const validateVerifycode = (rule, value, callback) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (!value) &#123;</span><br><span class="line">            callback(new Error(<span class="string">'请输入验证码'</span>));</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (value != this.identifyCode) &#123;</span><br><span class="line">            console.log(<span class="string">'validateVerifycode:'</span>, value)</span><br><span class="line">            this.ruleForm.validate = <span class="string">''</span></span><br><span class="line">            this.refreshCode()</span><br><span class="line">            callback(new Error(<span class="string">'验证码不正确!'</span>));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            callback();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="built_in">return</span> &#123;</span><br><span class="line">        // isDebugLogin: <span class="literal">false</span>,</span><br><span class="line">        identifyCodes: <span class="string">'123456789'</span>,</span><br><span class="line">        identifyCode: <span class="string">''</span>,</span><br><span class="line">        ruleForm: &#123;</span><br><span class="line">          pass: <span class="string">''</span>,</span><br><span class="line">          username: <span class="string">''</span>,</span><br><span class="line">          validate: <span class="string">''</span></span><br><span class="line">        &#125;,</span><br><span class="line">        rules: &#123;</span><br><span class="line">          username: [</span><br><span class="line">            // &#123; required: <span class="literal">true</span>, message: <span class="string">'请输入用户名'</span>, trigger: <span class="string">'blur'</span> &#125;,</span><br><span class="line">            // &#123; min: 3, max: 8, message: <span class="string">'长度为 3 到 8 个字符'</span>, trigger: <span class="string">'blur'</span> &#125;</span><br><span class="line">            &#123; validator: checkPhone, required: <span class="literal">true</span>, trigger: <span class="string">'blur'</span> &#125;</span><br><span class="line">          ],</span><br><span class="line">          pass: [</span><br><span class="line">            &#123; required: <span class="literal">true</span>, message: <span class="string">'请输入密码'</span>, trigger: <span class="string">'blur'</span> &#125;,</span><br><span class="line">            &#123; min: 6, max: 17, message: <span class="string">'长度为 6 到 17 个字符'</span>, trigger: <span class="string">'change'</span> &#125;</span><br><span class="line">          ],</span><br><span class="line">          validate: [</span><br><span class="line">            &#123; validator: validateVerifycode, required: <span class="literal">true</span>, trigger: <span class="string">'blur'</span> &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">mounted</span></span> () &#123;</span><br><span class="line">      // 初始化验证码</span><br><span class="line">      this.identifyCode = <span class="string">''</span></span><br><span class="line">      this.makeCode(this.identifyCodes, 4)</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      randomNum(min, max) &#123;</span><br><span class="line">        <span class="built_in">return</span> Math.floor(Math.random() * (max - min) + min)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function"><span class="title">refreshCode</span></span>() &#123;</span><br><span class="line">        this.identifyCode = <span class="string">''</span></span><br><span class="line">        this.makeCode(this.identifyCodes, 4)</span><br><span class="line">      &#125;,</span><br><span class="line">      makeCode(o, l) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">let</span> i = 0; i &lt; l; i++) &#123;</span><br><span class="line">          this.identifyCode += this.identifyCodes[</span><br><span class="line">            this.randomNum(0, this.identifyCodes.length)</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      submitForm(formName) &#123;</span><br><span class="line">        this.<span class="variable">$refs</span>[formName].validate((valid) =&gt; &#123;</span><br><span class="line">          console.log(valid)</span><br><span class="line">          <span class="keyword">if</span> (valid) &#123;</span><br><span class="line">            alert(<span class="string">'submit!'</span>);</span><br><span class="line">            // 发送请求给后台,请求数据成功之后</span><br><span class="line">            this.<span class="variable">$router</span>.push(<span class="string">'/home'</span>)</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            console.log(<span class="string">'error submit!!'</span>);</span><br><span class="line">            <span class="built_in">return</span> <span class="literal">false</span>;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function"><span class="title">created</span></span>() &#123;</span><br><span class="line">        this.refreshCode()</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function"><span class="title">registerClick</span></span>() &#123;</span><br><span class="line">        this.<span class="variable">$router</span>.push(<span class="string">'/register'</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function"><span class="title">Forgetpass</span></span>() &#123;</span><br><span class="line">        this.<span class="variable">$router</span>.push( <span class="string">'/forget'</span> )</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>简书: <a href="https://www.jianshu.com/p/0801b2d51d64" target="_blank" rel="noopener">Server</a></p>

            <div class="clearfix"></div>
            <hr class="nogutter">
        </div>
        <nav class="m-pagination col-md-8 col-md-offset-2 col-sm-24" role="pagination">
    
    <a class="pull-left" href="/2020/07/08/MongoDBAndNode/" style="float: left;">
        ← MongoDB和Node.js编写简单的登录注册跳转
    </a>
    
    
    <a class="pull-right" href="/2020/07/07/CopyInformation/">
        实现点击按钮复制信息 →
    </a>
    
</nav>

        <div class="col-md-8 col-md-offset-2 col-sm-24"><script type="text/javascript">
  /**
   * 搜狐畅言
   */

  /*
  document.write('<div id="SOHUCS" sid="' + window.location.pathname.slice(1) + '" ></div>');

  window.onload = function () {
    (function () {
      var appid = 'cytXXXX';
      var conf = 'prod_xxxxxxxxxxxxxxxxx';
      var width = window.innerWidth || document.documentElement.clientWidth;
      var loadJs = function (d, a, id) {
        var c = document.getElementsByTagName("head")[0] || document.head || document.documentElement;
        var b = document.createElement("script");
        b.setAttribute("type", "text/javascript");
        b.setAttribute("charset", "UTF-8");
        b.setAttribute("src", d);
        if (id) {
          b.setAttribute("id", id);
        }
        if (typeof a === "function") {
          if (window.attachEvent) {
            b.onreadystatechange = function () {
              var e = b.readyState;
              if (e === "loaded" || e === "complete") {
                b.onreadystatechange = null;
                a()
              }
            }
          } else {
            b.onload = a
          }
        }
        c.appendChild(b)
      };

      loadJs("https://changyan.sohu.com/upload/changyan.js", function () {
        window.changyan.api.config({
          appid: appid,
          conf: conf
        })
      });
    })();
  }
  */

</script>
</div>
    </div>
</section>


      <!-- ============================ Footer =========================== -->

<footer>
    <div class="container">
        <div class="copy">
            <p>
                &copy; 2020 <i class="fa fa-heart" aria-hidden="true"></i>
                <!-- <script>new Date().getFullYear() > 2010 && document.write("-" + new Date().getFullYear());</script>,  -->
                By LingegeA.
            </p>
            <p>博客全站共3.4k字</p>
            
            <div>
                <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> 
                <p id="busuanzi_container_site_uv" style='display:none'> Total Visitors: --<span id="busuanzi_value_site_uv"></span>--</p>
            </div>
            
        </div>
        <div class="social">
            <ul>
                
                <li><a href="https://github.com/" title="Github" target="_blank"><i class="icon-github"></i></a>&nbsp;
                </li>
                
                
                <li><a href="https://twitter.com/" title="Twitter" target="_blank"><i
                            class="icon-twitter"></i></a>&nbsp;</li>
                
                
                <li><a href="https://www.facebook.com/" title="Facebook" target="_blank"><i
                            class="icon-facebook"></i></a>&nbsp;</li>
                
                
                <li><a href="https://google.com/" title="Google-Plus" target="_blank"><i
                            class="icon-google-plus"></i></a>&nbsp;</li>
                
                
                <li><a href="http://weibo.com/" title="Sina-Weibo" target="_blank"><i
                            class="icon-sina-weibo"></i></a>&nbsp;</li>
                
            </ul>
        </div>
    </div>
</footer>

<!-- ============================ END Footer =========================== -->
      <!-- Load our scripts -->
<!-- Resizable 'on-demand' full-height hero -->
<script type="text/javascript">
    var resizeHero = function () {
        var hero = $(".cover,.heightblock"),
            window1 = $(window);
        hero.css({
            "height": window1.height()
        });
    };

    resizeHero();

    $(window).resize(function () {
        resizeHero();
    });
</script>
<script src="/js/plugins.min.js"></script><!-- Bootstrap core and concatenated plugins always load here -->
<script src="/js/scripts.js"></script><!-- Theme scripts -->


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$('#intro').find('img').each(function(){
  var alt = this.alt;

  if (alt){
    $(this).after('<span class="caption" style="display:none">' + alt + '</span>');
  }

  $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="gallery" />');
});
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



      
</body>
<script color="0,0,255" opacity="0.5" zIndex="-1" count="99" src="/js/canvas-nest.min.js"></script>
</html>
